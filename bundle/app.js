(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.moduleBundle=f()}})(function(){var define,module,exports;return function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r}()({1:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.BasicExample=void 0;var math_1=require("@daign/math");var _2d_graphics_1=require("@daign/2d-graphics");var _2d_graphics_svg_1=require("@daign/2d-graphics-svg");var polylineControl_1=require("./polylineControl");var drawing_style_1=require("./drawing.style");var BasicExample=function(){function BasicExample(){var _this=this;this.svgContext=new _2d_graphics_svg_1.SvgContext;this.svgContext.size=new math_1.Vector2(800,600);document.body.appendChild(this.svgContext.domNode);this.application=new _2d_graphics_1.Application(this.svgContext,true);this.view=new _2d_graphics_1.ApplicationView(this.application);var rendererFactory=new _2d_graphics_svg_1.RendererFactory;this.renderer=rendererFactory.createRenderer(drawing_style_1.styleSheet);this.constructGraphic();this.drawGraphic();this.application.drawingLayer.redrawObservable.subscribeToChanges(function(){_this.drawGraphic()})}BasicExample.prototype.constructGraphic=function(){this.application.drawingLayer.clearChildren();var points=[new math_1.Vector2(2,12),new math_1.Vector2(2,8),new math_1.Vector2(0,8),new math_1.Vector2(8,0),new math_1.Vector2(11,3),new math_1.Vector2(11,0),new math_1.Vector2(13,0),new math_1.Vector2(13,5),new math_1.Vector2(16,8),new math_1.Vector2(14,8),new math_1.Vector2(14,12),new math_1.Vector2(9,12),new math_1.Vector2(9,9),new math_1.Vector2(7,9),new math_1.Vector2(7,12),new math_1.Vector2(4,12)];var polyline=new polylineControl_1.PolylineControl(points);this.application.drawingLayer.appendChild(polyline);var text=new _2d_graphics_1.ScalableText;text.anchor=new math_1.Vector2(8,15);text.fontSize=1.5;text.content="Click on the line to show the controls.";text.textAnchor="middle";this.application.drawingLayer.appendChild(text);this.application.fitToContent(2);this.view.mountNode(this.application)};BasicExample.prototype.drawGraphic=function(){this.renderer.render(this.view,this.svgContext.wrappedNode)};return BasicExample}();exports.BasicExample=BasicExample},{"./drawing.style":2,"./polylineControl":3,"@daign/2d-graphics":60,"@daign/2d-graphics-svg":13,"@daign/math":85}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.styleSheet=void 0;var style_sheets_1=require("@daign/style-sheets");var _2d_graphics_1=require("@daign/2d-graphics");exports.styleSheet=new style_sheets_1.StyleSheet;exports.styleSheet.parseFromString(".polyline {\n    fill: none;\n    stroke: #6699ff;\n    stroke-width: 10;\n  }\n  .control-layer {\n    .controlPoint {\n      fill: #ff0000;\n    }\n  }",_2d_graphics_1.GraphicStyle)},{"@daign/2d-graphics":60,"@daign/style-sheets":101}],3:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.PolylineControl=void 0;var _2d_graphics_1=require("@daign/2d-graphics");var PolylineControl=function(_super){__extends(PolylineControl,_super);function PolylineControl(points){var _this=_super.call(this)||this;_this.points.elements=points;return _this}PolylineControl.prototype.redraw=function(){_super.prototype.redraw.call(this);var polyline=new _2d_graphics_1.Polyline;this.appendChild(polyline);polyline.points.copyElements(this.points)};return PolylineControl}(_2d_graphics_1.ControlObject);exports.PolylineControl=PolylineControl},{"@daign/2d-graphics":60}],4:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CircleControlsExample=void 0;var math_1=require("@daign/math");var _2d_graphics_1=require("@daign/2d-graphics");var _2d_graphics_svg_1=require("@daign/2d-graphics-svg");var circleWithRadiusControl_1=require("./circleWithRadiusControl");var circleWithDiameterControl_1=require("./circleWithDiameterControl");var threePointCircleControl_1=require("./threePointCircleControl");var drawing_style_1=require("./drawing.style");var CircleControlsExample=function(){function CircleControlsExample(){var _this=this;this.svgContext=new _2d_graphics_svg_1.SvgContext;this.svgContext.size=new math_1.Vector2(800,600);document.body.appendChild(this.svgContext.domNode);this.application=new _2d_graphics_1.Application(this.svgContext,true);this.view=new _2d_graphics_1.ApplicationView(this.application);var rendererFactory=new _2d_graphics_svg_1.RendererFactory;this.renderer=rendererFactory.createRenderer(drawing_style_1.styleSheet);this.constructGraphic();this.drawGraphic();this.application.drawingLayer.redrawObservable.subscribeToChanges(function(){_this.drawGraphic()})}CircleControlsExample.prototype.constructGraphic=function(){this.application.drawingLayer.clearChildren();var circle1=new circleWithRadiusControl_1.CircleWithRadiusControl(new math_1.Vector2(-6,0),new math_1.Vector2(-7,-2));this.application.drawingLayer.appendChild(circle1);var circle2=new circleWithDiameterControl_1.CircleWithDiameterControl([new math_1.Vector2(-1,-2),new math_1.Vector2(1,2)]);this.application.drawingLayer.appendChild(circle2);var circle3=new threePointCircleControl_1.ThreePointCircleControl([new math_1.Vector2(5,-2),new math_1.Vector2(5,2),new math_1.Vector2(8,-1)]);this.application.drawingLayer.appendChild(circle3);var text=new _2d_graphics_1.ScalableText;text.anchor=new math_1.Vector2(0,5);text.fontSize=1;text.content="Click on a circle to show the controls.";text.textAnchor="middle";this.application.drawingLayer.appendChild(text);this.application.fitToContent(2);this.view.mountNode(this.application)};CircleControlsExample.prototype.drawGraphic=function(){this.renderer.render(this.view,this.svgContext.wrappedNode)};return CircleControlsExample}();exports.CircleControlsExample=CircleControlsExample},{"./circleWithDiameterControl":5,"./circleWithRadiusControl":6,"./drawing.style":7,"./threePointCircleControl":8,"@daign/2d-graphics":60,"@daign/2d-graphics-svg":13,"@daign/math":85}],5:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.CircleWithDiameterControl=void 0;var _2d_graphics_1=require("@daign/2d-graphics");var CircleWithDiameterControl=function(_super){__extends(CircleWithDiameterControl,_super);function CircleWithDiameterControl(points){var _this=_super.call(this)||this;_this.baseClass="circle-with-diameter";_this.points.elements=points;return _this}CircleWithDiameterControl.prototype.redraw=function(){_super.prototype.redraw.call(this);var circle=new _2d_graphics_1.TwoPointCircle;this.appendChild(circle);if(this.points.length>=2){var point1=this.points.getElement(0);var point2=this.points.getElement(1);var center=point1.clone().add(point2).multiplyScalar(.5);circle.center=center;circle.circlePoint=point1}};return CircleWithDiameterControl}(_2d_graphics_1.ControlObject);exports.CircleWithDiameterControl=CircleWithDiameterControl},{"@daign/2d-graphics":60}],6:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.CircleWithRadiusControl=void 0;var _2d_graphics_1=require("@daign/2d-graphics");var CircleWithRadiusControl=function(_super){__extends(CircleWithRadiusControl,_super);function CircleWithRadiusControl(center,circlePoint){var _this=_super.call(this)||this;_this.baseClass="circle-with-radius";_this.points.elements=[center,circlePoint];return _this}CircleWithRadiusControl.prototype.redraw=function(){_super.prototype.redraw.call(this);var circle=new _2d_graphics_1.TwoPointCircle;this.appendChild(circle);var center=this.points.getElement(0);if(center!==undefined){circle.center=center}var circlePoint=this.points.getElement(1);if(circlePoint!==undefined){circle.circlePoint=circlePoint}};return CircleWithRadiusControl}(_2d_graphics_1.ControlObject);exports.CircleWithRadiusControl=CircleWithRadiusControl},{"@daign/2d-graphics":60}],7:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.styleSheet=void 0;var style_sheets_1=require("@daign/style-sheets");var _2d_graphics_1=require("@daign/2d-graphics");exports.styleSheet=new style_sheets_1.StyleSheet;exports.styleSheet.parseFromString(".circle-with-radius {\n    fill: #99ccff;\n    stroke: #6699ff;\n    stroke-width: 5;\n  }\n  .circle-with-diameter {\n    fill: #ff99cc;\n    stroke: #ff6699;\n    stroke-width: 5;\n  }\n  .three-point-circle {\n    fill: #ccff99;\n    stroke: #99ff66;\n    stroke-width: 5;\n  }\n  .control-layer {\n    .controlPoint {\n      fill: #ff0000;\n    }\n  }",_2d_graphics_1.GraphicStyle)},{"@daign/2d-graphics":60,"@daign/style-sheets":101}],8:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.ThreePointCircleControl=void 0;var math_1=require("@daign/math");var _2d_graphics_1=require("@daign/2d-graphics");var ThreePointCircleControl=function(_super){__extends(ThreePointCircleControl,_super);function ThreePointCircleControl(points){var _this=_super.call(this)||this;_this.baseClass="three-point-circle";_this.points.elements=points;return _this}ThreePointCircleControl.prototype.redraw=function(){_super.prototype.redraw.call(this);var circle=new _2d_graphics_1.TwoPointCircle;this.appendChild(circle);if(this.points.length>=3){var triangle=new math_1.Triangle2(this.points.getElement(0),this.points.getElement(1),this.points.getElement(2));var center=triangle.getCircumcenter();if(center!==null){circle.center=center;circle.circlePoint=this.points.getElement(0)}}};return ThreePointCircleControl}(_2d_graphics_1.ControlObject);exports.ThreePointCircleControl=ThreePointCircleControl},{"@daign/2d-graphics":60,"@daign/math":85}],9:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ControlModifiersExample=void 0;var math_1=require("@daign/math");var _2d_pipeline_1=require("@daign/2d-pipeline");var _2d_graphics_1=require("@daign/2d-graphics");var _2d_graphics_svg_1=require("@daign/2d-graphics-svg");var polylineControl_1=require("./polylineControl");var drawing_style_1=require("./drawing.style");var ControlModifiersExample=function(){function ControlModifiersExample(){var _this=this;this.svgContext=new _2d_graphics_svg_1.SvgContext;this.svgContext.size=new math_1.Vector2(800,600);document.body.appendChild(this.svgContext.domNode);this.application=new _2d_graphics_1.Application(this.svgContext,true);this.view=new _2d_graphics_1.ApplicationView(this.application);var rendererFactory=new _2d_graphics_svg_1.RendererFactory;this.renderer=rendererFactory.createRenderer(drawing_style_1.styleSheet);this.constructGraphic();this.drawGraphic();this.application.drawingLayer.redrawObservable.subscribeToChanges(function(){_this.drawGraphic()})}ControlModifiersExample.prototype.constructGraphic=function(){this.application.drawingLayer.clearChildren();var generatePoints=function(){return[new math_1.Vector2(2,12),new math_1.Vector2(2,8),new math_1.Vector2(0,8),new math_1.Vector2(8,0),new math_1.Vector2(11,3),new math_1.Vector2(11,0),new math_1.Vector2(13,0),new math_1.Vector2(13,5),new math_1.Vector2(16,8),new math_1.Vector2(14,8),new math_1.Vector2(14,12),new math_1.Vector2(9,12),new math_1.Vector2(9,9),new math_1.Vector2(7,9),new math_1.Vector2(7,12),new math_1.Vector2(4,12)]};var polyline1=new polylineControl_1.PolylineControl(generatePoints());this.application.drawingLayer.appendChild(polyline1);var polyline2=new polylineControl_1.PolylineControl(generatePoints());polyline2.controlModifier=new _2d_graphics_1.FollowAlongModifier;var matrixTransform=new _2d_pipeline_1.MatrixTransform;matrixTransform.matrix.applyTranslation(new math_1.Vector2(20,0));polyline2.transformation.push(matrixTransform);this.application.drawingLayer.appendChild(polyline2);var polyline3=new polylineControl_1.PolylineControl(generatePoints());var modifierChain=new _2d_graphics_1.ControlModifierChain;modifierChain.addModifier(new _2d_graphics_1.OrthogonalModifier);modifierChain.addModifier(new _2d_graphics_1.FollowAlongModifier);polyline3.controlModifier=modifierChain;var matrixTransform2=new _2d_pipeline_1.MatrixTransform;matrixTransform2.matrix.applyTranslation(new math_1.Vector2(0,18));polyline3.transformation.push(matrixTransform2);this.application.drawingLayer.appendChild(polyline3);var polyline4=new polylineControl_1.PolylineControl(generatePoints());polyline4.controlModifier=new _2d_graphics_1.RoundingModifier(0);var matrixTransform3=new _2d_pipeline_1.MatrixTransform;matrixTransform3.matrix.applyTranslation(new math_1.Vector2(20,18));polyline4.transformation.push(matrixTransform3);this.application.drawingLayer.appendChild(polyline4);var text1=new _2d_graphics_1.ScalableText;text1.anchor=new math_1.Vector2(8,15);text1.fontSize=1.5;text1.content="no modifier";text1.textAnchor="middle";this.application.drawingLayer.appendChild(text1);var text2=new _2d_graphics_1.ScalableText;text2.anchor=new math_1.Vector2(28,15);text2.fontSize=1.5;text2.content="follow along";text2.textAnchor="middle";this.application.drawingLayer.appendChild(text2);var text3=new _2d_graphics_1.ScalableText;text3.anchor=new math_1.Vector2(8,33);text3.fontSize=1.5;text3.content="orthogonal";text3.textAnchor="middle";this.application.drawingLayer.appendChild(text3);var text4=new _2d_graphics_1.ScalableText;text4.anchor=new math_1.Vector2(28,33);text4.fontSize=1.5;text4.content="grid";text4.textAnchor="middle";this.application.drawingLayer.appendChild(text4);this.application.fitToContent(2);this.view.mountNode(this.application)};ControlModifiersExample.prototype.drawGraphic=function(){this.renderer.render(this.view,this.svgContext.wrappedNode)};return ControlModifiersExample}();exports.ControlModifiersExample=ControlModifiersExample},{"./drawing.style":10,"./polylineControl":11,"@daign/2d-graphics":60,"@daign/2d-graphics-svg":13,"@daign/2d-pipeline":64,"@daign/math":85}],10:[function(require,module,exports){arguments[4][2][0].apply(exports,arguments)},{"@daign/2d-graphics":60,"@daign/style-sheets":101,dup:2}],11:[function(require,module,exports){arguments[4][3][0].apply(exports,arguments)},{"@daign/2d-graphics":60,dup:3}],12:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ControlModifiersExample=exports.CircleControlsExample=exports.BasicExample=void 0;var basicExample_1=require("./basic-example/basicExample");Object.defineProperty(exports,"BasicExample",{enumerable:true,get:function(){return basicExample_1.BasicExample}});var circleControlsExample_1=require("./circle-controls/circleControlsExample");Object.defineProperty(exports,"CircleControlsExample",{enumerable:true,get:function(){return circleControlsExample_1.CircleControlsExample}});var controlModifiersExample_1=require("./control-modifiers/controlModifiersExample");Object.defineProperty(exports,"ControlModifiersExample",{enumerable:true,get:function(){return controlModifiersExample_1.ControlModifiersExample}})},{"./basic-example/basicExample":1,"./circle-controls/circleControlsExample":4,"./control-modifiers/controlModifiersExample":9}],13:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RendererFactory=exports.RenderModule=exports.SvgRenderer=exports.SvgContext=void 0;var svgContext_1=require("./svgContext");Object.defineProperty(exports,"SvgContext",{enumerable:true,get:function(){return svgContext_1.SvgContext}});var svgRenderer_1=require("./svgRenderer");Object.defineProperty(exports,"SvgRenderer",{enumerable:true,get:function(){return svgRenderer_1.SvgRenderer}});var renderModule_1=require("./renderModule");Object.defineProperty(exports,"RenderModule",{enumerable:true,get:function(){return renderModule_1.RenderModule}});var rendererFactory_1=require("./rendererFactory");Object.defineProperty(exports,"RendererFactory",{enumerable:true,get:function(){return rendererFactory_1.RendererFactory}})},{"./renderModule":14,"./rendererFactory":29,"./svgContext":30,"./svgRenderer":31}],14:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RenderModule=void 0;var RenderModule=function(){function RenderModule(type,callback){this.type=type;this.callback=callback}return RenderModule}();exports.RenderModule=RenderModule},{}],15:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buttonControlModule=void 0;var handle_1=require("@daign/handle");var _2d_graphics_1=require("@daign/2d-graphics");var renderModule_1=require("../renderModule");exports.buttonControlModule=new renderModule_1.RenderModule(_2d_graphics_1.ButtonControl,function(currentNode,_,node){if(node!==null){var buttonControl_1=currentNode.sourceNode;var handle=new handle_1.Handle({startNode:node});handle.beginning=function(){return true};handle.clicked=function(){buttonControl_1.click()}}return null})},{"../renderModule":14,"@daign/2d-graphics":60,"@daign/handle":76}],16:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.controlObjectModule=void 0;var handle_1=require("@daign/handle");var _2d_graphics_1=require("@daign/2d-graphics");var renderModule_1=require("../renderModule");exports.controlObjectModule=new renderModule_1.RenderModule(_2d_graphics_1.ControlObject,function(currentNode,_,node){if(node!==null){var controlObject_1=currentNode.sourceNode;var handle=new handle_1.Handle({startNode:node});handle.beginning=function(){return true};handle.clicked=function(){if(controlObject_1){controlObject_1.presentationNodes.forEach(function(pn){if(pn.view instanceof _2d_graphics_1.ApplicationView){pn.view.application.selectionManager.setSelection(controlObject_1,null)}})}}}return null})},{"../renderModule":14,"@daign/2d-graphics":60,"@daign/handle":76}],17:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.controlPointModule=void 0;var handle_1=require("@daign/handle");var _2d_graphics_1=require("@daign/2d-graphics");var renderModule_1=require("../renderModule");exports.controlPointModule=new renderModule_1.RenderModule(_2d_graphics_1.ControlPoint,function(currentNode,_,node){if(node!==null){var controlPoint_1=currentNode.sourceNode;var handle_2=new handle_1.Handle({startNode:node});handle_2.beginning=function(){controlPoint_1.snap();controlPoint_1.application.selectionManager.setSelection(controlPoint_1.controlObject,controlPoint_1.targetPoint);return true};handle_2.continuing=function(){controlPoint_1.drag(handle_2.delta.clone())}}return null})},{"../renderModule":14,"@daign/2d-graphics":60,"@daign/handle":76}],18:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fixedRadiusCircleModule=void 0;var _2d_graphics_1=require("@daign/2d-graphics");var dom_pool_1=require("@daign/dom-pool");var renderModule_1=require("../renderModule");exports.fixedRadiusCircleModule=new renderModule_1.RenderModule(_2d_graphics_1.FixedRadiusCircle,function(currentNode,selectorChain){var circle=currentNode.sourceNode;selectorChain.addSelector(circle.styleSelector);var center=circle.getCenterTransformed(currentNode.projectNodeToView);var radius=circle.radius;var circleNode=dom_pool_1.WrappedDomPool.getSvg("circle");circleNode.setAttribute("cx",String(center.x));circleNode.setAttribute("cy",String(center.y));circleNode.setAttribute("r",String(radius));return circleNode})},{"../renderModule":14,"@daign/2d-graphics":60,"@daign/dom-pool":71}],19:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.groupModule=void 0;var _2d_graphics_1=require("@daign/2d-graphics");var dom_pool_1=require("@daign/dom-pool");var renderModule_1=require("../renderModule");exports.groupModule=new renderModule_1.RenderModule(_2d_graphics_1.Group,function(currentNode,selectorChain,_,renderer){var group=currentNode.sourceNode;selectorChain.addSelector(group.styleSelector);var groupNode=dom_pool_1.WrappedDomPool.getSvg("g");currentNode.children.forEach(function(child){var selectorChainCopy=selectorChain.clone();var renderedNode=renderer.renderRecursive(child,selectorChainCopy);if(renderedNode!==null){groupNode.appendChild(renderedNode)}});return groupNode})},{"../renderModule":14,"@daign/2d-graphics":60,"@daign/dom-pool":71}],20:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.viewModule=exports.twoPointRectangleModule=exports.twoPointCircleModule=exports.textModule=exports.scalableTextModule=exports.quadraticCurveModule=exports.polylineModule=exports.lineModule=exports.groupModule=exports.fixedRadiusCircleModule=exports.controlPointModule=exports.controlObjectModule=exports.buttonControlModule=void 0;var buttonControlModule_1=require("./buttonControlModule");Object.defineProperty(exports,"buttonControlModule",{enumerable:true,get:function(){return buttonControlModule_1.buttonControlModule}});var controlObjectModule_1=require("./controlObjectModule");Object.defineProperty(exports,"controlObjectModule",{enumerable:true,get:function(){return controlObjectModule_1.controlObjectModule}});var controlPointModule_1=require("./controlPointModule");Object.defineProperty(exports,"controlPointModule",{enumerable:true,get:function(){return controlPointModule_1.controlPointModule}});var fixedRadiusCircleModule_1=require("./fixedRadiusCircleModule");Object.defineProperty(exports,"fixedRadiusCircleModule",{enumerable:true,get:function(){return fixedRadiusCircleModule_1.fixedRadiusCircleModule}});var groupModule_1=require("./groupModule");Object.defineProperty(exports,"groupModule",{enumerable:true,get:function(){return groupModule_1.groupModule}});var lineModule_1=require("./lineModule");Object.defineProperty(exports,"lineModule",{enumerable:true,get:function(){return lineModule_1.lineModule}});var polylineModule_1=require("./polylineModule");Object.defineProperty(exports,"polylineModule",{enumerable:true,get:function(){return polylineModule_1.polylineModule}});var quadraticCurveModule_1=require("./quadraticCurveModule");Object.defineProperty(exports,"quadraticCurveModule",{enumerable:true,get:function(){return quadraticCurveModule_1.quadraticCurveModule}});var scalableTextModule_1=require("./scalableTextModule");Object.defineProperty(exports,"scalableTextModule",{enumerable:true,get:function(){return scalableTextModule_1.scalableTextModule}});var textModule_1=require("./textModule");Object.defineProperty(exports,"textModule",{enumerable:true,get:function(){return textModule_1.textModule}});var twoPointCircleModule_1=require("./twoPointCircleModule");Object.defineProperty(exports,"twoPointCircleModule",{enumerable:true,get:function(){return twoPointCircleModule_1.twoPointCircleModule}});var twoPointRectangleModule_1=require("./twoPointRectangleModule");Object.defineProperty(exports,"twoPointRectangleModule",{enumerable:true,get:function(){return twoPointRectangleModule_1.twoPointRectangleModule}});var viewModule_1=require("./viewModule");Object.defineProperty(exports,"viewModule",{enumerable:true,get:function(){return viewModule_1.viewModule}})},{"./buttonControlModule":15,"./controlObjectModule":16,"./controlPointModule":17,"./fixedRadiusCircleModule":18,"./groupModule":19,"./lineModule":21,"./polylineModule":22,"./quadraticCurveModule":23,"./scalableTextModule":24,"./textModule":25,"./twoPointCircleModule":26,"./twoPointRectangleModule":27,"./viewModule":28}],21:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.lineModule=void 0;var _2d_graphics_1=require("@daign/2d-graphics");var dom_pool_1=require("@daign/dom-pool");var renderModule_1=require("../renderModule");exports.lineModule=new renderModule_1.RenderModule(_2d_graphics_1.Line,function(currentNode,selectorChain){var line=currentNode.sourceNode;selectorChain.addSelector(line.styleSelector);var startPoint=line.getStartTransformed(currentNode.projectNodeToView);var endPoint=line.getEndTransformed(currentNode.projectNodeToView);var lineNode=dom_pool_1.WrappedDomPool.getSvg("line");lineNode.setAttribute("x1",String(startPoint.x));lineNode.setAttribute("y1",String(startPoint.y));lineNode.setAttribute("x2",String(endPoint.x));lineNode.setAttribute("y2",String(endPoint.y));return lineNode})},{"../renderModule":14,"@daign/2d-graphics":60,"@daign/dom-pool":71}],22:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.polylineModule=void 0;var _2d_graphics_1=require("@daign/2d-graphics");var dom_pool_1=require("@daign/dom-pool");var renderModule_1=require("../renderModule");exports.polylineModule=new renderModule_1.RenderModule(_2d_graphics_1.Polyline,function(currentNode,selectorChain){var polyline=currentNode.sourceNode;selectorChain.addSelector(polyline.styleSelector);var points=polyline.getPointsTransformed(currentNode.projectNodeToView);var pointsString=points.map(function(p){return"".concat(p.x,",").concat(p.y)}).join(" ");var lineNode=dom_pool_1.WrappedDomPool.getSvg("polyline");lineNode.setAttribute("points",pointsString);return lineNode})},{"../renderModule":14,"@daign/2d-graphics":60,"@daign/dom-pool":71}],23:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.quadraticCurveModule=void 0;var _2d_graphics_1=require("@daign/2d-graphics");var dom_pool_1=require("@daign/dom-pool");var renderModule_1=require("../renderModule");exports.quadraticCurveModule=new renderModule_1.RenderModule(_2d_graphics_1.QuadraticCurve,function(currentNode,selectorChain){var curve=currentNode.sourceNode;selectorChain.addSelector(curve.styleSelector);var points=curve.getPointsTransformed(currentNode.projectNodeToView);var pathString=points.map(function(p,index){if(index===0){return"M ".concat(p.x,",").concat(p.y," Q")}return"".concat(p.x,",").concat(p.y)}).join(" ");var pathNode=dom_pool_1.WrappedDomPool.getSvg("path");pathNode.setAttribute("d",pathString);return pathNode})},{"../renderModule":14,"@daign/2d-graphics":60,"@daign/dom-pool":71}],24:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.scalableTextModule=void 0;var _2d_graphics_1=require("@daign/2d-graphics");var dom_pool_1=require("@daign/dom-pool");var renderModule_1=require("../renderModule");exports.scalableTextModule=new renderModule_1.RenderModule(_2d_graphics_1.ScalableText,function(currentNode,selectorChain){var text=currentNode.sourceNode;selectorChain.addSelector(text.styleSelector);var anchor=text.getAnchorTransformed(currentNode.projectNodeToView);var fontSize=text.getFontSizeTransformed(currentNode.projectNodeToView);var textNode=dom_pool_1.WrappedDomPool.getSvg("text");textNode.setAttribute("x",String(anchor.x));textNode.setAttribute("y",String(anchor.y));textNode.setAttribute("text-anchor",text.textAnchor);textNode.textContent=text.content;textNode.setAttribute("font-size",String(fontSize));return textNode})},{"../renderModule":14,"@daign/2d-graphics":60,"@daign/dom-pool":71}],25:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.textModule=void 0;var _2d_graphics_1=require("@daign/2d-graphics");var dom_pool_1=require("@daign/dom-pool");var renderModule_1=require("../renderModule");exports.textModule=new renderModule_1.RenderModule(_2d_graphics_1.Text,function(currentNode,selectorChain){var text=currentNode.sourceNode;selectorChain.addSelector(text.styleSelector);var anchor=text.getAnchorTransformed(currentNode.projectNodeToView);var textNode=dom_pool_1.WrappedDomPool.getSvg("text");textNode.setAttribute("x",String(anchor.x));textNode.setAttribute("y",String(anchor.y));textNode.setAttribute("text-anchor",text.textAnchor);textNode.textContent=text.content;return textNode})},{"../renderModule":14,"@daign/2d-graphics":60,"@daign/dom-pool":71}],26:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.twoPointCircleModule=void 0;var _2d_graphics_1=require("@daign/2d-graphics");var dom_pool_1=require("@daign/dom-pool");var renderModule_1=require("../renderModule");exports.twoPointCircleModule=new renderModule_1.RenderModule(_2d_graphics_1.TwoPointCircle,function(currentNode,selectorChain){var circle=currentNode.sourceNode;selectorChain.addSelector(circle.styleSelector);var center=circle.getCenterTransformed(currentNode.projectNodeToView);var radius=circle.getRadiusTransformed(currentNode.projectNodeToView);var circleNode=dom_pool_1.WrappedDomPool.getSvg("circle");circleNode.setAttribute("cx",String(center.x));circleNode.setAttribute("cy",String(center.y));circleNode.setAttribute("r",String(radius));return circleNode})},{"../renderModule":14,"@daign/2d-graphics":60,"@daign/dom-pool":71}],27:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.twoPointRectangleModule=void 0;var _2d_graphics_1=require("@daign/2d-graphics");var dom_pool_1=require("@daign/dom-pool");var renderModule_1=require("../renderModule");exports.twoPointRectangleModule=new renderModule_1.RenderModule(_2d_graphics_1.TwoPointRectangle,function(currentNode,selectorChain){var rectangle=currentNode.sourceNode;selectorChain.addSelector(rectangle.styleSelector);var startPoint=rectangle.getStartTransformed(currentNode.projectNodeToView);var size=rectangle.getSizeTransformed(currentNode.projectNodeToView);var rectNode=dom_pool_1.WrappedDomPool.getSvg("rect");rectNode.setAttribute("x",String(startPoint.x));rectNode.setAttribute("y",String(startPoint.y));rectNode.setAttribute("width",String(size.x));rectNode.setAttribute("height",String(size.y));return rectNode})},{"../renderModule":14,"@daign/2d-graphics":60,"@daign/dom-pool":71}],28:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.viewModule=void 0;var _2d_pipeline_1=require("@daign/2d-pipeline");var dom_pool_1=require("@daign/dom-pool");var renderModule_1=require("../renderModule");exports.viewModule=new renderModule_1.RenderModule(_2d_pipeline_1.View,function(currentNode,selectorChain,_,renderer){var groupNode=dom_pool_1.WrappedDomPool.getSvg("g");currentNode.children.forEach(function(child){var selectorChainCopy=selectorChain.clone();var renderedNode=renderer.renderRecursive(child,selectorChainCopy);if(renderedNode!==null){groupNode.appendChild(renderedNode)}});return groupNode})},{"../renderModule":14,"@daign/2d-pipeline":64,"@daign/dom-pool":71}],29:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RendererFactory=void 0;var svgRenderer_1=require("./svgRenderer");var renderModules_1=require("./renderModules");var RendererFactory=function(){function RendererFactory(){}RendererFactory.prototype.createRenderer=function(styleSheet){var renderer=new svgRenderer_1.SvgRenderer(styleSheet);renderer.addRenderModule(renderModules_1.lineModule);renderer.addRenderModule(renderModules_1.twoPointRectangleModule);renderer.addRenderModule(renderModules_1.polylineModule);renderer.addRenderModule(renderModules_1.twoPointCircleModule);renderer.addRenderModule(renderModules_1.fixedRadiusCircleModule);renderer.addRenderModule(renderModules_1.quadraticCurveModule);renderer.addRenderModule(renderModules_1.textModule);renderer.addRenderModule(renderModules_1.scalableTextModule);renderer.addRenderModule(renderModules_1.groupModule);renderer.addRenderModule(renderModules_1.viewModule);renderer.addRenderModule(renderModules_1.controlObjectModule);renderer.addRenderModule(renderModules_1.controlPointModule);renderer.addRenderModule(renderModules_1.buttonControlModule);return renderer};return RendererFactory}();exports.RendererFactory=RendererFactory},{"./renderModules":20,"./svgRenderer":31}],30:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SvgContext=void 0;var math_1=require("@daign/math");var dom_pool_1=require("@daign/dom-pool");var SvgContext=function(){function SvgContext(){this._size=new math_1.Vector2(1,1);this.wrappedNode=dom_pool_1.WrappedDomPool.getSvg("svg")}Object.defineProperty(SvgContext.prototype,"domNode",{get:function(){return this.wrappedNode.domNode},enumerable:false,configurable:true});Object.defineProperty(SvgContext.prototype,"size",{get:function(){return this._size},set:function(size){this._size.copy(size);this.domNode.style.width="".concat(size.x,"px");this.domNode.style.height="".concat(size.y,"px");this.domNode.setAttribute("viewBox","0,0,".concat(size.x,",").concat(size.y))},enumerable:false,configurable:true});return SvgContext}();exports.SvgContext=SvgContext},{"@daign/dom-pool":71,"@daign/math":85}],31:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SvgRenderer=void 0;var style_sheets_1=require("@daign/style-sheets");var _2d_graphics_1=require("@daign/2d-graphics");var dom_pool_1=require("@daign/dom-pool");var SvgRenderer=function(){function SvgRenderer(styleSheet){this.renderModules=[];this.styleSheet=styleSheet}SvgRenderer.prototype.addRenderModule=function(renderModule){this.renderModules.push(renderModule)};SvgRenderer.prototype.applyStyle=function(node,style){if(style.fill){node.setAttribute("fill",style.fill)}if(style.fillOpacity!==null){node.setAttribute("fill-opacity",String(style.fillOpacity))}if(style.fillRule){node.setAttribute("fill-rule",style.fillRule)}if(style.stroke){node.setAttribute("stroke",style.stroke)}if(style.strokeWidth!==null){node.setAttribute("stroke-width",String(style.strokeWidth))}if(style.strokeOpacity!==null){node.setAttribute("stroke-opacity",String(style.strokeOpacity))}if(style.strokeLinecap){node.setAttribute("stroke-linecap",style.strokeLinecap)}if(style.strokeLinejoin){node.setAttribute("stroke-linejoin",style.strokeLinejoin)}if(style.strokeMiterlimit!==null){node.setAttribute("stroke-miterlimit",String(style.strokeMiterlimit))}if(style.strokeDasharray){node.setAttribute("stroke-dasharray",style.strokeDasharray)}if(style.strokeDashoffset!==null){node.setAttribute("stroke-dashoffset",String(style.strokeDashoffset))}if(style.vectorEffect){node.setAttribute("vector-effect",style.vectorEffect)}if(style.display){node.setAttribute("display",style.display)}if(style.visibility){node.setAttribute("visibility",style.visibility)}if(style.opacity!==null){node.setAttribute("opacity",String(style.opacity))}if(style.paintOrder){node.setAttribute("paint-order",style.paintOrder)}if(style.fontFamily){node.style.fontFamily=style.fontFamily}if(style.fontSize){node.style.fontSize=style.fontSize}if(style.fontStyle){node.style.fontSize=style.fontStyle}if(style.fontVariant){node.style.fontVariant=style.fontVariant}if(style.fontWeight){node.style.fontWeight=style.fontWeight}if(style.fontStretch){node.style.fontStretch=style.fontStretch}if(style.letterSpacing){node.style.letterSpacing=style.letterSpacing}if(style.wordSpacing){node.style.wordSpacing=style.wordSpacing}if(style.textDecoration){node.style.textDecoration=style.textDecoration}if(style.pointerEvents){node.setAttribute("pointer-events",style.pointerEvents)}if(style.cursor){node.setAttribute("cursor",style.cursor)}};SvgRenderer.prototype.renderRecursive=function(currentNode,selectorChain){var _this=this;var node=null;this.renderModules.forEach(function(module){if(currentNode.sourceNode&&_this.doesModuleMatchToNode(currentNode.sourceNode,module.type)){var result=module.callback(currentNode,selectorChain,node,_this);if(result!==null){node=result}}});if(node!==null){var styleProcessor=new style_sheets_1.StyleProcessor;var calculatedStyle=styleProcessor.calculateStyle(this.styleSheet,selectorChain,_2d_graphics_1.GraphicStyle);this.applyStyle(node,calculatedStyle)}return node};SvgRenderer.prototype.clearRecursive=function(node){var _this=this;node.children.forEach(function(child){_this.clearRecursive(child)});dom_pool_1.WrappedDomPool.giveBack(node)};SvgRenderer.prototype.render=function(view,target){var _this=this;target.children.forEach(function(child){_this.clearRecursive(child)});target.clearChildren();var presentationNode=view.viewPresentationNode;var selectorChain=new style_sheets_1.StyleSelectorChain;if(presentationNode!==null){var result=this.renderRecursive(presentationNode,selectorChain);if(result!==null){target.appendChild(result)}}};SvgRenderer.prototype.doesModuleMatchToNode=function(graphicNode,moduleType){if(graphicNode instanceof moduleType){return true}return false};return SvgRenderer}();exports.SvgRenderer=SvgRenderer},{"@daign/2d-graphics":60,"@daign/dom-pool":71,"@daign/style-sheets":101}],32:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.Application=void 0;var group_1=require("../basic-elements/group");var controlLayer_1=require("./controlLayer");var interactiveViewport_1=require("./interactiveViewport");var selectionManager_1=require("./selectionManager");var viewport_1=require("./viewport");var Application=function(_super){__extends(Application,_super);function Application(context,interactive){if(interactive===void 0){interactive=false}var _this=_super.call(this)||this;_this.controlLayer=null;_this.selectionManager=new selectionManager_1.SelectionManager;if(interactive){_this.drawingLayer=new interactiveViewport_1.InteractiveViewport(context,_this);_this.appendChild(_this.drawingLayer);_this.controlLayer=new controlLayer_1.ControlLayer(_this);_this.appendChild(_this.controlLayer);_this.selectionManager.subscribeToChanges(function(){_this.createControls();_this.drawingLayer.redrawObservable.notify()})}else{_this.drawingLayer=new viewport_1.Viewport(context,_this);_this.appendChild(_this.drawingLayer)}return _this}Application.prototype.fitToContent=function(margin){this.drawingLayer.fitToContent(margin)};Application.prototype.createControls=function(){if(this.controlLayer){this.controlLayer.createControls()}};return Application}(group_1.Group);exports.Application=Application},{"../basic-elements/group":39,"./controlLayer":34,"./interactiveViewport":35,"./selectionManager":36,"./viewport":37}],33:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.ApplicationView=void 0;var _2d_pipeline_1=require("@daign/2d-pipeline");var ApplicationView=function(_super){__extends(ApplicationView,_super);function ApplicationView(application){var _this=_super.call(this)||this;_this.application=application;return _this}return ApplicationView}(_2d_pipeline_1.View);exports.ApplicationView=ApplicationView},{"@daign/2d-pipeline":64}],34:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.ControlLayer=void 0;var basic_elements_1=require("../basic-elements");var ControlLayer=function(_super){__extends(ControlLayer,_super);function ControlLayer(application){var _this=_super.call(this)||this;_this.application=application;_this.baseClass="control-layer";return _this}ControlLayer.prototype.createControls=function(){this.clearChildren();var activeObject=this.application.selectionManager.activeObject;var activePoint=this.application.selectionManager.activePoint;if(activeObject){var node=activeObject.redrawControlObjects(activePoint,this.application);this.appendChild(node)}};return ControlLayer}(basic_elements_1.Group);exports.ControlLayer=ControlLayer},{"../basic-elements":40}],35:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.InteractiveViewport=void 0;var handle_1=require("@daign/handle");var math_1=require("@daign/math");var viewport_1=require("./viewport");var InteractiveViewport=function(_super){__extends(InteractiveViewport,_super);function InteractiveViewport(context,application){var _this=_super.call(this,context,application)||this;_this.viewportHandle=undefined;_this.extractFromTouchEventRelativeToContext=function(event,touchIndex){if(!_this.context.domNode||!_this.context.domNode.getBoundingClientRect){throw new Error("Unable to read offset of context node.")}var rect=_this.context.domNode.getBoundingClientRect();if(!rect||rect.left===undefined||rect.top===undefined){throw new Error("Unable to read offset of context node.")}if(!event||!event.touches||!event.touches[touchIndex]||event.touches[touchIndex].pageX===undefined||event.touches[touchIndex].pageY===undefined){throw new Error("Unable to extract position from event.")}var x=event.touches[touchIndex].pageX-rect.left;var y=event.touches[touchIndex].pageY-rect.top;return new math_1.Vector2(x,y)};if(context.domNode){var minimumDragDistance=5;var extractFromEvent=function(event){return(new math_1.Vector2).setFromEventRelative(event)};var extractFromTouchEvent=_this.extractFromTouchEventRelativeToContext;var handleConfig={startNode:context.domNode,minimumDragDistance:minimumDragDistance,extractFromEvent:extractFromEvent,extractFromTouchEvent:extractFromTouchEvent};var handle_2=new handle_1.MultiTouchScrollHandle(handleConfig);_this.viewportHandle=handle_2;var viewScaleSnapshot_1;var transformationSnapshot_1;handle_2.beginning=function(){_this.viewCenter.snap();viewScaleSnapshot_1=_this.viewScale;transformationSnapshot_1=_this.transformation.inverseTransformMatrix.clone();return true};handle_2.continuing=function(){var startPosition1=handle_2.getStartPosition(0);var startPosition2=handle_2.getStartPosition(1);var tempPosition1=handle_2.getTempPosition(0);var tempPosition2=handle_2.getTempPosition(1);var delta1=handle_2.getDelta(0);if(startPosition1!==undefined&&startPosition2!==undefined&&tempPosition1!==undefined&&tempPosition2!==undefined&&_this.viewCenter.snapshot!==undefined){var distanceStart=startPosition2.clone().sub(startPosition1).length();var distanceTemp=tempPosition2.clone().sub(tempPosition1).length();distanceStart=Math.max(distanceStart,1);distanceTemp=Math.max(distanceTemp,1);var zoomFactor=distanceTemp/distanceStart;var newScale=viewScaleSnapshot_1*zoomFactor;_this.viewScale=Math.max(.01,Math.min(1e3,newScale));var transformedTempPosition1=tempPosition1.clone().transform(transformationSnapshot_1);var transformedstartPosition1=startPosition1.clone().transform(transformationSnapshot_1);var newCenter=_this.viewCenter.snapshot.clone().sub(transformedTempPosition1).multiplyScalar(1/zoomFactor).add(transformedstartPosition1);_this.viewCenter.copy(newCenter)}else if(delta1!==undefined){var drag=delta1.clone().multiplyScalar(-1/_this.viewScale);_this.viewCenter.drag(drag)}_this.updateViewport();_this.application.createControls();_this.redrawObservable.notify()};handle_2.clicked=function(){_this.application.selectionManager.setSelection(null,null);_this.redrawObservable.notify()};handle_2.scrolling=function(){var sign=Math.sign(handle_2.scroll.y);var factor=Math.pow(1.1,-sign);var oldScale=_this.viewScale;_this.viewScale=Math.max(.01,Math.min(1e3,oldScale*factor));factor=_this.viewScale/oldScale;var mousePosition=handle_2.scrollPosition.clone();mousePosition.transform(_this.transformation.inverseTransformMatrix);_this.viewCenter.sub(mousePosition).multiplyScalar(1/factor).add(mousePosition);_this.updateViewport();_this.application.createControls();_this.redrawObservable.notify()}}return _this}InteractiveViewport.prototype.enableViewportActions=function(enabled){if(this.viewportHandle){this.viewportHandle.enabled=enabled}};return InteractiveViewport}(viewport_1.Viewport);exports.InteractiveViewport=InteractiveViewport},{"./viewport":37,"@daign/handle":76,"@daign/math":85}],36:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.SelectionManager=void 0;var observable_1=require("@daign/observable");var SelectionManager=function(_super){__extends(SelectionManager,_super);function SelectionManager(){var _this=_super.call(this)||this;_this.activeObject=null;_this.activePoint=null;return _this}SelectionManager.prototype.setSelection=function(activeObject,activePoint){if(activeObject===null&&activePoint!==null){return}if(activeObject!==null&&activePoint!==null){var points=activeObject.points.elements;if(points.indexOf(activePoint)===-1){return}}if(this.activeObject!==activeObject||this.activePoint!==activePoint){this.activeObject=activeObject;this.activePoint=activePoint;this.notifyObservers()}};return SelectionManager}(observable_1.Observable);exports.SelectionManager=SelectionManager},{"@daign/observable":97}],37:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.Viewport=void 0;var math_1=require("@daign/math");var _2d_pipeline_1=require("@daign/2d-pipeline");var observable_1=require("@daign/observable");var group_1=require("../basic-elements/group");var ObservableObject=function(_super){__extends(ObservableObject,_super);function ObservableObject(){return _super.call(this)||this}ObservableObject.prototype.notify=function(){this.notifyObservers()};return ObservableObject}(observable_1.Observable);var Viewport=function(_super){__extends(Viewport,_super);function Viewport(context,application){var _this=_super.call(this)||this;_this.viewTransformation=new _2d_pipeline_1.MatrixTransform;_this.viewCenter=new math_1.Vector2;_this.viewScale=1;_this.redrawObservable=new ObservableObject;_this.context=context;_this.application=application;_this.viewCenter.copy(context.size).multiplyScalar(.5);_this.transformation.push(_this.viewTransformation);return _this}Viewport.prototype.fitToContent=function(margin){var contentBox=this.getBox();if(margin){contentBox.expandByScalar(margin)}var scaling=this.context.size.clone().divide(contentBox.size);this.viewScale=Math.min(scaling.x,scaling.y);this.viewCenter.copy(contentBox.min).add(contentBox.size.clone().multiplyScalar(.5));this.updateViewport()};Viewport.prototype.updateViewport=function(){var decentering=new math_1.Vector2(-this.viewCenter.x,-this.viewCenter.y);var scaling=new math_1.Vector2(this.viewScale,this.viewScale);var translation=this.context.size.clone().multiplyScalar(.5);this.viewTransformation.matrix.setIdentity();this.viewTransformation.matrix.applyTranslation(decentering);this.viewTransformation.matrix.applyScaling(scaling);this.viewTransformation.matrix.applyTranslation(translation)};return Viewport}(group_1.Group);exports.Viewport=Viewport},{"../basic-elements/group":39,"@daign/2d-pipeline":64,"@daign/math":85,"@daign/observable":97}],38:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.FixedRadiusCircle=void 0;var styledGraphicNode_1=require("../styledGraphicNode");var FixedRadiusCircle=function(_super){__extends(FixedRadiusCircle,_super);function FixedRadiusCircle(){var _this=_super.call(this)||this;_this.radius=1;_this.baseClass="circle";_this.points.initializeElements(1);_this.points.assignName("center",0);return _this}Object.defineProperty(FixedRadiusCircle.prototype,"center",{get:function(){return this.points.getByName("center")},set:function(position){this.points.getByName("center").copy(position)},enumerable:false,configurable:true});FixedRadiusCircle.prototype.getCenterTransformed=function(transformation){var centerPoint=this.center.clone().transform(transformation);return centerPoint};return FixedRadiusCircle}(styledGraphicNode_1.StyledGraphicNode);exports.FixedRadiusCircle=FixedRadiusCircle},{"../styledGraphicNode":61}],39:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.Group=void 0;var math_1=require("@daign/math");var styledGraphicNode_1=require("../styledGraphicNode");var Group=function(_super){__extends(Group,_super);function Group(){var _this=_super.call(this)||this;_this.baseClass="group";return _this}Group.prototype.getBox=function(){var box=new math_1.Box2;this.children.forEach(function(child){if(child instanceof styledGraphicNode_1.StyledGraphicNode){box.expandByBox(child.getBoxTransformed())}});return box};return Group}(styledGraphicNode_1.StyledGraphicNode);exports.Group=Group},{"../styledGraphicNode":61,"@daign/math":85}],40:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TwoPointRectangle=exports.TwoPointCircle=exports.Text=exports.SinglePointElement=exports.ScalableText=exports.QuadraticCurve=exports.Polyline=exports.Line=exports.Group=exports.FixedRadiusCircle=void 0;var fixedRadiusCircle_1=require("./fixedRadiusCircle");Object.defineProperty(exports,"FixedRadiusCircle",{enumerable:true,get:function(){return fixedRadiusCircle_1.FixedRadiusCircle}});var group_1=require("./group");Object.defineProperty(exports,"Group",{enumerable:true,get:function(){return group_1.Group}});var line_1=require("./line");Object.defineProperty(exports,"Line",{enumerable:true,get:function(){return line_1.Line}});var polyline_1=require("./polyline");Object.defineProperty(exports,"Polyline",{enumerable:true,get:function(){return polyline_1.Polyline}});var quadraticCurve_1=require("./quadraticCurve");Object.defineProperty(exports,"QuadraticCurve",{enumerable:true,get:function(){return quadraticCurve_1.QuadraticCurve}});var scalableText_1=require("./scalableText");Object.defineProperty(exports,"ScalableText",{enumerable:true,get:function(){return scalableText_1.ScalableText}});var singlePointElement_1=require("./singlePointElement");Object.defineProperty(exports,"SinglePointElement",{enumerable:true,get:function(){return singlePointElement_1.SinglePointElement}});var text_1=require("./text");Object.defineProperty(exports,"Text",{enumerable:true,get:function(){return text_1.Text}});var twoPointCircle_1=require("./twoPointCircle");Object.defineProperty(exports,"TwoPointCircle",{enumerable:true,get:function(){return twoPointCircle_1.TwoPointCircle}});var twoPointRectangle_1=require("./twoPointRectangle");Object.defineProperty(exports,"TwoPointRectangle",{enumerable:true,get:function(){return twoPointRectangle_1.TwoPointRectangle}})},{"./fixedRadiusCircle":38,"./group":39,"./line":41,"./polyline":42,"./quadraticCurve":43,"./scalableText":44,"./singlePointElement":45,"./text":46,"./twoPointCircle":47,"./twoPointRectangle":48}],41:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.Line=void 0;var styledGraphicNode_1=require("../styledGraphicNode");var Line=function(_super){__extends(Line,_super);function Line(){var _this=_super.call(this)||this;_this.baseClass="line";_this.points.initializeElements(2);_this.points.assignName("start",0);_this.points.assignName("end",1);return _this}Object.defineProperty(Line.prototype,"start",{get:function(){return this.points.getByName("start")},set:function(position){this.points.getByName("start").copy(position)},enumerable:false,configurable:true});Object.defineProperty(Line.prototype,"end",{get:function(){return this.points.getByName("end")},set:function(position){this.points.getByName("end").copy(position)},enumerable:false,configurable:true});Line.prototype.getStartTransformed=function(transformation){var startPoint=this.start.clone().transform(transformation);return startPoint};Line.prototype.getEndTransformed=function(transformation){var endPoint=this.end.clone().transform(transformation);return endPoint};return Line}(styledGraphicNode_1.StyledGraphicNode);exports.Line=Line},{"../styledGraphicNode":61}],42:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.Polyline=void 0;var styledGraphicNode_1=require("../styledGraphicNode");var Polyline=function(_super){__extends(Polyline,_super);function Polyline(){var _this=_super.call(this)||this;_this.baseClass="polyline";return _this}return Polyline}(styledGraphicNode_1.StyledGraphicNode);exports.Polyline=Polyline},{"../styledGraphicNode":61}],43:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.QuadraticCurve=void 0;var styledGraphicNode_1=require("../styledGraphicNode");var QuadraticCurve=function(_super){__extends(QuadraticCurve,_super);function QuadraticCurve(){var _this=_super.call(this)||this;_this.baseClass="quadratic-curve";return _this}return QuadraticCurve}(styledGraphicNode_1.StyledGraphicNode);exports.QuadraticCurve=QuadraticCurve},{"../styledGraphicNode":61}],44:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.ScalableText=void 0;var math_1=require("@daign/math");var styledGraphicNode_1=require("../styledGraphicNode");var ScalableText=function(_super){__extends(ScalableText,_super);function ScalableText(){var _this=_super.call(this)||this;_this.content="";_this.textAnchor="end";_this._fontSize=1;_this.baseClass="scalableText";_this.points.initializeElements(2);_this.points.assignName("anchor",0);_this.points.assignName("heightPoint",1);return _this}Object.defineProperty(ScalableText.prototype,"anchor",{get:function(){return this.points.getByName("anchor")},set:function(position){this.points.getByName("anchor").copy(position)},enumerable:false,configurable:true});Object.defineProperty(ScalableText.prototype,"heightPoint",{get:function(){return this.points.getByName("heightPoint")},enumerable:false,configurable:true});Object.defineProperty(ScalableText.prototype,"fontSize",{get:function(){return this._fontSize},set:function(size){this._fontSize=size;var position=this.anchor.clone().add(new math_1.Vector2(0,-size));this.points.getByName("heightPoint").copy(position)},enumerable:false,configurable:true});ScalableText.prototype.getFontSizeTransformed=function(transformation){var anchorPoint=this.anchor.clone().transform(transformation);var heightPoint=this.heightPoint.clone().transform(transformation);var fontSize=anchorPoint.distanceTo(heightPoint);return fontSize};ScalableText.prototype.getAnchorTransformed=function(transformation){var anchorPoint=this.anchor.clone().transform(transformation);return anchorPoint};ScalableText.prototype.getBox=function(){var box=new math_1.Box2;box.expandByPoint(this.anchor);box.expandByPoint(this.heightPoint);var estimatedWidth=this.content.length*this.fontSize*.5;if(this.textAnchor==="end"){box.expandByPoint(this.anchor.clone().add(new math_1.Vector2(-estimatedWidth,0)))}else if(this.textAnchor==="start"){box.expandByPoint(this.anchor.clone().add(new math_1.Vector2(estimatedWidth,0)))}else if(this.textAnchor==="middle"){box.expandByPoint(this.anchor.clone().add(new math_1.Vector2(.5*estimatedWidth,0)));box.expandByPoint(this.anchor.clone().add(new math_1.Vector2(-.5*estimatedWidth,0)))}return box};return ScalableText}(styledGraphicNode_1.StyledGraphicNode);exports.ScalableText=ScalableText},{"../styledGraphicNode":61,"@daign/math":85}],45:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.SinglePointElement=void 0;var styledGraphicNode_1=require("../styledGraphicNode");var SinglePointElement=function(_super){__extends(SinglePointElement,_super);function SinglePointElement(){var _this=_super.call(this)||this;_this.points.initializeElements(1);_this.points.assignName("anchor",0);return _this}Object.defineProperty(SinglePointElement.prototype,"anchor",{get:function(){return this.points.getByName("anchor")},set:function(position){this.points.getByName("anchor").copy(position)},enumerable:false,configurable:true});SinglePointElement.prototype.getAnchorTransformed=function(transformation){var anchorPoint=this.anchor.clone().transform(transformation);return anchorPoint};return SinglePointElement}(styledGraphicNode_1.StyledGraphicNode);exports.SinglePointElement=SinglePointElement},{"../styledGraphicNode":61}],46:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.Text=void 0;var singlePointElement_1=require("./singlePointElement");var Text=function(_super){__extends(Text,_super);function Text(){var _this=_super.call(this)||this;_this.content="";_this.textAnchor="end";_this.baseClass="text";return _this}return Text}(singlePointElement_1.SinglePointElement);exports.Text=Text},{"./singlePointElement":45}],47:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.TwoPointCircle=void 0;var math_1=require("@daign/math");var styledGraphicNode_1=require("../styledGraphicNode");var TwoPointCircle=function(_super){__extends(TwoPointCircle,_super);function TwoPointCircle(){var _this=_super.call(this)||this;_this.baseClass="circle";_this.points.initializeElements(2);_this.points.assignName("center",0);_this.points.assignName("circlePoint",1);return _this}Object.defineProperty(TwoPointCircle.prototype,"center",{get:function(){return this.points.getByName("center")},set:function(position){this.points.getByName("center").copy(position)},enumerable:false,configurable:true});Object.defineProperty(TwoPointCircle.prototype,"circlePoint",{get:function(){return this.points.getByName("circlePoint")},set:function(position){this.points.getByName("circlePoint").copy(position)},enumerable:false,configurable:true});TwoPointCircle.prototype.getRadiusTransformed=function(transformation){var centerPoint=this.center.clone().transform(transformation);var circlePoint=this.circlePoint.clone().transform(transformation);var radius=centerPoint.distanceTo(circlePoint);return radius};TwoPointCircle.prototype.getCenterTransformed=function(transformation){var centerPoint=this.center.clone().transform(transformation);return centerPoint};TwoPointCircle.prototype.getBox=function(){var box=new math_1.Box2;var radius=this.center.distanceTo(this.circlePoint);box.expandByPoint(this.center);box.expandByScalar(radius);return box};return TwoPointCircle}(styledGraphicNode_1.StyledGraphicNode);exports.TwoPointCircle=TwoPointCircle},{"../styledGraphicNode":61,"@daign/math":85}],48:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.TwoPointRectangle=void 0;var math_1=require("@daign/math");var styledGraphicNode_1=require("../styledGraphicNode");var TwoPointRectangle=function(_super){__extends(TwoPointRectangle,_super);function TwoPointRectangle(){var _this=_super.call(this)||this;_this.baseClass="rectangle";_this.points.initializeElements(2);_this.points.assignName("start",0);_this.points.assignName("end",1);return _this}Object.defineProperty(TwoPointRectangle.prototype,"start",{get:function(){return this.points.getByName("start")},set:function(position){this.points.getByName("start").copy(position)},enumerable:false,configurable:true});Object.defineProperty(TwoPointRectangle.prototype,"end",{get:function(){return this.points.getByName("end")},set:function(position){this.points.getByName("end").copy(position)},enumerable:false,configurable:true});TwoPointRectangle.prototype.getStartTransformed=function(transformation){var area=new math_1.Box2;var startPoint=this.start.clone().transform(transformation);area.expandByPoint(startPoint);var endPoint=this.end.clone().transform(transformation);area.expandByPoint(endPoint);return area.min};TwoPointRectangle.prototype.getEndTransformed=function(transformation){var area=new math_1.Box2;var startPoint=this.start.clone().transform(transformation);area.expandByPoint(startPoint);var endPoint=this.end.clone().transform(transformation);area.expandByPoint(endPoint);return area.max};TwoPointRectangle.prototype.getSizeTransformed=function(transformation){var area=new math_1.Box2;var startPoint=this.start.clone().transform(transformation);area.expandByPoint(startPoint);var endPoint=this.end.clone().transform(transformation);area.expandByPoint(endPoint);return area.size};return TwoPointRectangle}(styledGraphicNode_1.StyledGraphicNode);exports.TwoPointRectangle=TwoPointRectangle},{"../styledGraphicNode":61,"@daign/math":85}],49:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.ButtonControl=void 0;var _2d_pipeline_1=require("@daign/2d-pipeline");var basic_elements_1=require("../basic-elements");var ButtonControl=function(_super){__extends(ButtonControl,_super);function ButtonControl(buttonObject,targetTransformation,application){var _this=_super.call(this)||this;_this.application=application;_this.callback=buttonObject.callback;var center=buttonObject.anchor.clone().transform(targetTransformation);var offset=new _2d_pipeline_1.MatrixTransform;offset.matrix.setTranslation(center);_this.transformation.push(offset);_this.baseClass="buttonControl";if(buttonObject.buttonShape){_this.appendChild(buttonObject.buttonShape)}else{var defaultShape=new basic_elements_1.FixedRadiusCircle;defaultShape.radius=15;_this.appendChild(defaultShape)}return _this}ButtonControl.prototype.click=function(){this.callback();this.application.createControls();this.application.drawingLayer.redrawObservable.notify()};return ButtonControl}(basic_elements_1.Group);exports.ButtonControl=ButtonControl},{"../basic-elements":40,"@daign/2d-pipeline":64}],50:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.ButtonObject=void 0;var basic_elements_1=require("../basic-elements");var ButtonObject=function(_super){__extends(ButtonObject,_super);function ButtonObject(callback){var _this=_super.call(this)||this;_this.callback=callback;_this.baseClass="button";return _this}return ButtonObject}(basic_elements_1.SinglePointElement);exports.ButtonObject=ButtonObject},{"../basic-elements":40}],51:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.ControlObject=void 0;var basic_elements_1=require("../basic-elements");var buttonControl_1=require("./buttonControl");var controlPoint_1=require("./controlPoint");var ControlObject=function(_super){__extends(ControlObject,_super);function ControlObject(){var _this=_super.call(this)||this;_this.controlModifier=null;_this.controlGuides=[];_this.controlPointShapes=[];_this.buttons=[];_this.redraw();_this.points.subscribeToChanges(function(){_this.redraw()});return _this}ControlObject.prototype.redraw=function(){this.clearChildren();this.buttons=[]};ControlObject.prototype.redrawControlObjects=function(activePoint,application){var _this=this;var group=new basic_elements_1.Group;var transformation=this.presentationNodes[0].projectNodeToView;this.controlGuides.forEach(function(controlGuide){var node=controlGuide.redraw(_this,activePoint);if(node){group.appendChild(node)}});this.points.iterate(function(point,index){var controlPoint=new controlPoint_1.ControlPoint(point,transformation,application,_this,index,_this.controlPointShapes[index]);group.appendChild(controlPoint);if(point===activePoint){controlPoint.addClass("active")}});this.buttons.forEach(function(button){var buttonControl=new buttonControl_1.ButtonControl(button,transformation,application);group.appendChild(buttonControl)});return group};return ControlObject}(basic_elements_1.Group);exports.ControlObject=ControlObject},{"../basic-elements":40,"./buttonControl":49,"./controlPoint":52}],52:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.ControlPoint=void 0;var _2d_pipeline_1=require("@daign/2d-pipeline");var basic_elements_1=require("../basic-elements");var ControlPoint=function(_super){__extends(ControlPoint,_super);function ControlPoint(targetPoint,targetTransformation,application,controlObject,controlIndex,controlShape){var _this=_super.call(this)||this;_this.targetPoint=targetPoint;_this.targetTransformation=targetTransformation;_this.application=application;_this.controlObject=controlObject;_this.controlIndex=controlIndex;_this.offset=new _2d_pipeline_1.MatrixTransform;_this.baseClass="controlPoint";_this.points.initializeElements(1);_this.points.assignName("center",0);_this.center=_this.targetPoint.clone().transform(_this.targetTransformation);_this.transformation.push(_this.offset);if(controlShape){_this.appendChild(controlShape)}else if(controlShape===undefined){var defaultShape=new basic_elements_1.FixedRadiusCircle;defaultShape.radius=15;_this.appendChild(defaultShape)}return _this}Object.defineProperty(ControlPoint.prototype,"center",{get:function(){return this.points.getByName("center")},set:function(position){this.points.getByName("center").copy(position);this.calculateOffset()},enumerable:false,configurable:true});ControlPoint.prototype.calculateOffset=function(){this.offset.matrix.setTranslation(this.center)};ControlPoint.prototype.snap=function(){this.center.snap()};ControlPoint.prototype.drag=function(delta){this.center.drag(delta);var presentationNode=this.controlObject.presentationNodes[0];var calculatedPosition=this.center.clone().transform(presentationNode.projectViewToNode);var updatedPoints=this.controlObject.points.cloneDeep().elements;updatedPoints[this.controlIndex].copy(calculatedPosition);if(this.controlObject.controlModifier){updatedPoints=this.controlObject.controlModifier.modifyPoints(updatedPoints,this.controlIndex,this.controlObject)}this.controlObject.points.iterate(function(element,index){element.copy(updatedPoints[index])});this.calculateOffset();this.application.createControls();this.application.drawingLayer.redrawObservable.notify()};return ControlPoint}(basic_elements_1.Group);exports.ControlPoint=ControlPoint},{"../basic-elements":40,"@daign/2d-pipeline":64}],53:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SelectionFrame=void 0;var basic_elements_1=require("../basic-elements");var SelectionFrame=function(){function SelectionFrame(){}SelectionFrame.prototype.redraw=function(activeObject){var transformation=activeObject.presentationNodes[0].projectNodeToView;var box=activeObject.getBox();var start=box.min.clone().transform(transformation);var end=box.max.clone().transform(transformation);var frame=new basic_elements_1.TwoPointRectangle;frame.addClass("selection-frame");frame.start=start;frame.end=end;return frame};return SelectionFrame}();exports.SelectionFrame=SelectionFrame},{"../basic-elements":40}],54:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ControlModifierChain=void 0;var ControlModifierChain=function(){function ControlModifierChain(){this.enabled=true;this.modifiers=[];this.selectorFunction=function(){return true}}ControlModifierChain.prototype.modifyPoints=function(updatedPoints,pointIndex,controlObject){var doExecute=this.selectorFunction(updatedPoints,pointIndex,controlObject);if(!doExecute||!this.enabled){return updatedPoints}var modifiedPoints=updatedPoints;this.modifiers.forEach(function(modifier){modifiedPoints=modifier.modifyPoints(modifiedPoints,pointIndex,controlObject)});return modifiedPoints};ControlModifierChain.prototype.addModifier=function(modifier){this.modifiers.push(modifier)};return ControlModifierChain}();exports.ControlModifierChain=ControlModifierChain},{}],55:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FollowAlongModifier=void 0;var FollowAlongModifier=function(){function FollowAlongModifier(){this.enabled=true}FollowAlongModifier.prototype.modifyPoints=function(updatedPoints,pointIndex,controlObject){if(!this.enabled){return updatedPoints}var pointBefore=controlObject.points.getElement(pointIndex);var pointAfter=updatedPoints[pointIndex];if(pointBefore){var diff_1=pointAfter.clone().sub(pointBefore);var modifiedPoints=updatedPoints.map(function(point,index){if(index>pointIndex){point.add(diff_1)}return point});return modifiedPoints}return updatedPoints};return FollowAlongModifier}();exports.FollowAlongModifier=FollowAlongModifier},{}],56:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.OrthogonalModifier=void 0;var OrthogonalModifier=function(){function OrthogonalModifier(){this.enabled=true}OrthogonalModifier.prototype.modifyPoints=function(updatedPoints,pointIndex,_controlObject){if(!this.enabled){return updatedPoints}if(pointIndex===0){return updatedPoints}var targetPoint=updatedPoints[pointIndex];var previousPoint=updatedPoints[pointIndex-1];var diffHorizontal=Math.abs(targetPoint.x-previousPoint.x);var diffVertical=Math.abs(targetPoint.y-previousPoint.y);if(diffHorizontal>diffVertical){targetPoint.set(targetPoint.x,previousPoint.y)}else{targetPoint.set(previousPoint.x,targetPoint.y)}return updatedPoints};return OrthogonalModifier}();exports.OrthogonalModifier=OrthogonalModifier},{}],57:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RoundFollowingModifier=void 0;var RoundFollowingModifier=function(){function RoundFollowingModifier(precision){this.enabled=true;this.precision=undefined;if(precision){this.precision=precision}}RoundFollowingModifier.prototype.modifyPoints=function(updatedPoints,pointIndex,_controlObject){var _this=this;if(!this.enabled){return updatedPoints}var modifiedPoints=updatedPoints.map(function(point,index){if(index>pointIndex){point.round(_this.precision)}return point});return modifiedPoints};return RoundFollowingModifier}();exports.RoundFollowingModifier=RoundFollowingModifier},{}],58:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RoundingModifier=void 0;var RoundingModifier=function(){function RoundingModifier(precision){this.enabled=true;this.precision=undefined;if(precision){this.precision=precision}}RoundingModifier.prototype.modifyPoints=function(updatedPoints,pointIndex,_controlObject){if(!this.enabled){return updatedPoints}var targetPoint=updatedPoints[pointIndex];targetPoint.round(this.precision);return updatedPoints};return RoundingModifier}();exports.RoundingModifier=RoundingModifier},{}],59:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.GraphicStyle=void 0;var GraphicStyle=function(){function GraphicStyle(fill,fillOpacity,fillRule,stroke,strokeWidth,strokeOpacity,strokeLinecap,strokeLinejoin,strokeMiterlimit,strokeDasharray,strokeDashoffset,vectorEffect,display,visibility,opacity,paintOrder,fontFamily,fontSize,fontStyle,fontVariant,fontWeight,fontStretch,letterSpacing,wordSpacing,textDecoration,pointerEvents,cursor){this.fill=null;this.fillOpacity=null;this.fillRule=null;this.stroke=null;this.strokeWidth=null;this.strokeOpacity=null;this.strokeLinecap=null;this.strokeLinejoin=null;this.strokeMiterlimit=null;this.strokeDasharray=null;this.strokeDashoffset=null;this.vectorEffect=null;this.display=null;this.visibility=null;this.opacity=null;this.paintOrder=null;this.fontFamily=null;this.fontSize=null;this.fontStyle=null;this.fontVariant=null;this.fontWeight=null;this.fontStretch=null;this.letterSpacing=null;this.wordSpacing=null;this.textDecoration=null;this.pointerEvents=null;this.cursor=null;if(fill){this.fill=fill}if(fillOpacity){this.fillOpacity=fillOpacity}if(fillRule){this.fillRule=fillRule}if(stroke){this.stroke=stroke}if(strokeWidth){this.strokeWidth=strokeWidth}if(strokeOpacity){this.strokeOpacity=strokeOpacity}if(strokeLinecap){this.strokeLinecap=strokeLinecap}if(strokeLinejoin){this.strokeLinejoin=strokeLinejoin}if(strokeMiterlimit){this.strokeMiterlimit=strokeMiterlimit}if(strokeDasharray){this.strokeDasharray=strokeDasharray}if(strokeDashoffset){this.strokeDashoffset=strokeDashoffset}if(vectorEffect){this.vectorEffect=vectorEffect}if(display){this.display=display}if(visibility){this.visibility=visibility}if(opacity){this.opacity=opacity}if(paintOrder){this.paintOrder=paintOrder}if(fontFamily){this.fontFamily=fontFamily}if(fontSize){this.fontSize=fontSize}if(fontStyle){this.fontStyle=fontStyle}if(fontVariant){this.fontVariant=fontVariant}if(fontWeight){this.fontWeight=fontWeight}if(fontStretch){this.fontStretch=fontStretch}if(letterSpacing){this.letterSpacing=letterSpacing}if(wordSpacing){this.wordSpacing=wordSpacing}if(textDecoration){this.textDecoration=textDecoration}if(pointerEvents){this.pointerEvents=pointerEvents}if(cursor){this.cursor=cursor}}Object.defineProperty(GraphicStyle.prototype,"isEmpty",{get:function(){return this.fill===null&&this.fillOpacity===null&&this.fillRule===null&&this.stroke===null&&this.strokeWidth===null&&this.strokeOpacity===null&&this.strokeLinecap===null&&this.strokeLinejoin===null&&this.strokeMiterlimit===null&&this.strokeDasharray===null&&this.strokeDashoffset===null&&this.vectorEffect===null&&this.display===null&&this.visibility===null&&this.opacity===null&&this.paintOrder===null&&this.fontFamily===null&&this.fontSize===null&&this.fontStyle===null&&this.fontVariant===null&&this.fontWeight===null&&this.fontStretch===null&&this.letterSpacing===null&&this.wordSpacing===null&&this.textDecoration===null&&this.pointerEvents===null&&this.cursor===null},enumerable:false,configurable:true});GraphicStyle.prototype.parseAttribute=function(name,value){if(name==="fill"){this.fill=value}else if(name==="fill-opacity"){this.fillOpacity=parseFloat(value)}else if(name==="fill-rule"){this.fillRule=value}else if(name==="stroke"){this.stroke=value}else if(name==="stroke-width"){this.strokeWidth=parseFloat(value)}else if(name==="stroke-opacity"){this.strokeOpacity=parseFloat(value)}else if(name==="stroke-linecap"){this.strokeLinecap=value}else if(name==="stroke-linejoin"){this.strokeLinejoin=value}else if(name==="stroke-miterlimit"){this.strokeMiterlimit=parseFloat(value)}else if(name==="stroke-dasharray"){this.strokeDasharray=value}else if(name==="stroke-dashoffset"){this.strokeDashoffset=parseFloat(value)}else if(name==="vector-effect"){this.vectorEffect=value}else if(name==="display"){this.display=value}else if(name==="visibility"){this.visibility=value}else if(name==="opacity"){this.opacity=parseFloat(value)}else if(name==="paint-order"){this.paintOrder=value}else if(name==="font-family"){this.fontFamily=value}else if(name==="font-size"){this.fontSize=value}else if(name==="font-style"){this.fontStyle=value}else if(name==="font-variant"){this.fontVariant=value}else if(name==="font-weight"){this.fontWeight=value}else if(name==="font-stretch"){this.fontStretch=value}else if(name==="letter-spacing"){this.letterSpacing=value}else if(name==="word-spacing"){this.wordSpacing=value}else if(name==="text-decoration"){this.textDecoration=value}else if(name==="pointer-events"){this.pointerEvents=value}else if(name==="cursor"){this.cursor=value}};GraphicStyle.prototype.complementWith=function(declaration){if(this.fill===null){this.fill=declaration.fill}if(this.fillOpacity===null){this.fillOpacity=declaration.fillOpacity}if(this.fillRule===null){this.fillRule=declaration.fillRule}if(this.stroke===null){this.stroke=declaration.stroke}if(this.strokeWidth===null){this.strokeWidth=declaration.strokeWidth}if(this.strokeOpacity===null){this.strokeOpacity=declaration.strokeOpacity}if(this.strokeLinecap===null){this.strokeLinecap=declaration.strokeLinecap}if(this.strokeLinejoin===null){this.strokeLinejoin=declaration.strokeLinejoin}if(this.strokeMiterlimit===null){this.strokeMiterlimit=declaration.strokeMiterlimit}if(this.strokeDasharray===null){this.strokeDasharray=declaration.strokeDasharray}if(this.strokeDashoffset===null){this.strokeDashoffset=declaration.strokeDashoffset}if(this.vectorEffect===null){this.vectorEffect=declaration.vectorEffect}if(this.display===null){this.display=declaration.display}if(this.visibility===null){this.visibility=declaration.visibility}if(this.opacity===null){this.opacity=declaration.opacity}if(this.paintOrder===null){this.paintOrder=declaration.paintOrder}if(this.fontFamily===null){this.fontFamily=declaration.fontFamily}if(this.fontSize===null){this.fontSize=declaration.fontSize}if(this.fontStyle===null){this.fontStyle=declaration.fontStyle}if(this.fontVariant===null){this.fontVariant=declaration.fontVariant}if(this.fontWeight===null){this.fontWeight=declaration.fontWeight}if(this.fontStretch===null){this.fontStretch=declaration.fontStretch}if(this.letterSpacing===null){this.letterSpacing=declaration.letterSpacing}if(this.wordSpacing===null){this.wordSpacing=declaration.wordSpacing}if(this.textDecoration===null){this.textDecoration=declaration.textDecoration}if(this.pointerEvents===null){this.pointerEvents=declaration.pointerEvents}if(this.cursor===null){this.cursor=declaration.cursor}};return GraphicStyle}();exports.GraphicStyle=GraphicStyle},{}],60:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.RoundingModifier=exports.RoundFollowingModifier=exports.OrthogonalModifier=exports.FollowAlongModifier=exports.ControlModifierChain=exports.SelectionFrame=exports.ControlPoint=exports.ControlObject=exports.ButtonObject=exports.ButtonControl=exports.TwoPointRectangle=exports.TwoPointCircle=exports.Text=exports.SinglePointElement=exports.ScalableText=exports.QuadraticCurve=exports.Polyline=exports.Line=exports.Group=exports.FixedRadiusCircle=exports.Viewport=exports.SelectionManager=exports.InteractiveViewport=exports.ControlLayer=exports.ApplicationView=exports.Application=exports.StyledGraphicNode=exports.GraphicStyle=void 0;var graphicStyle_1=require("./graphicStyle");Object.defineProperty(exports,"GraphicStyle",{enumerable:true,get:function(){return graphicStyle_1.GraphicStyle}});var styledGraphicNode_1=require("./styledGraphicNode");Object.defineProperty(exports,"StyledGraphicNode",{enumerable:true,get:function(){return styledGraphicNode_1.StyledGraphicNode}});var application_1=require("./application/application");Object.defineProperty(exports,"Application",{enumerable:true,get:function(){return application_1.Application}});var applicationView_1=require("./application/applicationView");Object.defineProperty(exports,"ApplicationView",{enumerable:true,get:function(){return applicationView_1.ApplicationView}});var controlLayer_1=require("./application/controlLayer");Object.defineProperty(exports,"ControlLayer",{enumerable:true,get:function(){return controlLayer_1.ControlLayer}});var interactiveViewport_1=require("./application/interactiveViewport");Object.defineProperty(exports,"InteractiveViewport",{enumerable:true,get:function(){return interactiveViewport_1.InteractiveViewport}});var selectionManager_1=require("./application/selectionManager");Object.defineProperty(exports,"SelectionManager",{enumerable:true,get:function(){return selectionManager_1.SelectionManager}});var viewport_1=require("./application/viewport");Object.defineProperty(exports,"Viewport",{enumerable:true,get:function(){return viewport_1.Viewport}});var fixedRadiusCircle_1=require("./basic-elements/fixedRadiusCircle");Object.defineProperty(exports,"FixedRadiusCircle",{enumerable:true,get:function(){return fixedRadiusCircle_1.FixedRadiusCircle}});var group_1=require("./basic-elements/group");Object.defineProperty(exports,"Group",{enumerable:true,get:function(){return group_1.Group}});var line_1=require("./basic-elements/line");Object.defineProperty(exports,"Line",{enumerable:true,get:function(){return line_1.Line}});var polyline_1=require("./basic-elements/polyline");Object.defineProperty(exports,"Polyline",{enumerable:true,get:function(){return polyline_1.Polyline}});var quadraticCurve_1=require("./basic-elements/quadraticCurve");Object.defineProperty(exports,"QuadraticCurve",{enumerable:true,get:function(){return quadraticCurve_1.QuadraticCurve}});var scalableText_1=require("./basic-elements/scalableText");Object.defineProperty(exports,"ScalableText",{enumerable:true,get:function(){return scalableText_1.ScalableText}});var singlePointElement_1=require("./basic-elements/singlePointElement");Object.defineProperty(exports,"SinglePointElement",{enumerable:true,get:function(){return singlePointElement_1.SinglePointElement}});var text_1=require("./basic-elements/text");Object.defineProperty(exports,"Text",{enumerable:true,get:function(){return text_1.Text}});var twoPointCircle_1=require("./basic-elements/twoPointCircle");Object.defineProperty(exports,"TwoPointCircle",{enumerable:true,get:function(){return twoPointCircle_1.TwoPointCircle}});var twoPointRectangle_1=require("./basic-elements/twoPointRectangle");Object.defineProperty(exports,"TwoPointRectangle",{enumerable:true,get:function(){return twoPointRectangle_1.TwoPointRectangle}});var buttonControl_1=require("./control-elements/buttonControl");Object.defineProperty(exports,"ButtonControl",{enumerable:true,get:function(){return buttonControl_1.ButtonControl}});var buttonObject_1=require("./control-elements/buttonObject");Object.defineProperty(exports,"ButtonObject",{enumerable:true,get:function(){return buttonObject_1.ButtonObject}});var controlObject_1=require("./control-elements/controlObject");Object.defineProperty(exports,"ControlObject",{enumerable:true,get:function(){return controlObject_1.ControlObject}});var controlPoint_1=require("./control-elements/controlPoint");Object.defineProperty(exports,"ControlPoint",{enumerable:true,get:function(){return controlPoint_1.ControlPoint}});var selectionFrame_1=require("./control-elements/selectionFrame");Object.defineProperty(exports,"SelectionFrame",{enumerable:true,get:function(){return selectionFrame_1.SelectionFrame}});var controlModifierChain_1=require("./control-modifiers/controlModifierChain");Object.defineProperty(exports,"ControlModifierChain",{enumerable:true,get:function(){return controlModifierChain_1.ControlModifierChain}});var followAlongModifier_1=require("./control-modifiers/followAlongModifier");Object.defineProperty(exports,"FollowAlongModifier",{enumerable:true,get:function(){return followAlongModifier_1.FollowAlongModifier}});var orthogonalModifier_1=require("./control-modifiers/orthogonalModifier");Object.defineProperty(exports,"OrthogonalModifier",{enumerable:true,get:function(){return orthogonalModifier_1.OrthogonalModifier}});var roundFollowingModifier_1=require("./control-modifiers/roundFollowingModifier");Object.defineProperty(exports,"RoundFollowingModifier",{enumerable:true,get:function(){return roundFollowingModifier_1.RoundFollowingModifier}});var roundingModifier_1=require("./control-modifiers/roundingModifier");Object.defineProperty(exports,"RoundingModifier",{enumerable:true,get:function(){return roundingModifier_1.RoundingModifier}})},{"./application/application":32,"./application/applicationView":33,"./application/controlLayer":34,"./application/interactiveViewport":35,"./application/selectionManager":36,"./application/viewport":37,"./basic-elements/fixedRadiusCircle":38,"./basic-elements/group":39,"./basic-elements/line":41,"./basic-elements/polyline":42,"./basic-elements/quadraticCurve":43,"./basic-elements/scalableText":44,"./basic-elements/singlePointElement":45,"./basic-elements/text":46,"./basic-elements/twoPointCircle":47,"./basic-elements/twoPointRectangle":48,"./control-elements/buttonControl":49,"./control-elements/buttonObject":50,"./control-elements/controlObject":51,"./control-elements/controlPoint":52,"./control-elements/selectionFrame":53,"./control-modifiers/controlModifierChain":54,"./control-modifiers/followAlongModifier":55,"./control-modifiers/orthogonalModifier":56,"./control-modifiers/roundFollowingModifier":57,"./control-modifiers/roundingModifier":58,"./graphicStyle":59,"./styledGraphicNode":61}],61:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.StyledGraphicNode=void 0;var math_1=require("@daign/math");var _2d_pipeline_1=require("@daign/2d-pipeline");var style_sheets_1=require("@daign/style-sheets");var StyledGraphicNode=function(_super){__extends(StyledGraphicNode,_super);function StyledGraphicNode(){var _this=_super.call(this)||this;_this.points=new math_1.Vector2Array;_this.classNames=new math_1.StringArray;_this.styleSelector=new style_sheets_1.StyleSelector;_this.elementStyle=null;_this.classNames.subscribeToChanges(function(){_this.buildStyleSelector()});return _this}Object.defineProperty(StyledGraphicNode.prototype,"baseClass",{set:function(baseClass){if(this.classNames.containsName("baseClass")){this.classNames.getByName("baseClass").value=baseClass}else{this.classNames.push(new math_1.StringValue(baseClass),"baseClass")}},enumerable:false,configurable:true});StyledGraphicNode.prototype.getPointsTransformed=function(transformation){return this.points.cloneDeep().transform(transformation).elements};StyledGraphicNode.prototype.getBoxTransformed=function(){return this.getBox().transform(this.transformation.transformMatrix)};StyledGraphicNode.prototype.getBox=function(){return this.points.getBox()};StyledGraphicNode.prototype.addClass=function(className){this.classNames.push(new math_1.StringValue(className))};StyledGraphicNode.prototype.setVariableClass=function(identifier,className){if(identifier==="baseClass"){throw new Error("baseClass is a protected identifier.")}if(this.classNames.containsName(identifier)){this.classNames.getByName(identifier).value=className}else{this.classNames.push(new math_1.StringValue(className),identifier)}};StyledGraphicNode.prototype.buildStyleSelector=function(){var selectorString=this.classNames.elements.map(function(s){return".".concat(s.value)}).join("");this.styleSelector=new style_sheets_1.StyleSelector(selectorString)};return StyledGraphicNode}(_2d_pipeline_1.GraphicNode);exports.StyledGraphicNode=StyledGraphicNode},{"@daign/2d-pipeline":64,"@daign/math":85,"@daign/style-sheets":101}],62:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.GenericNode=void 0;var observable_1=require("@daign/observable");var GenericNode=function(_super){__extends(GenericNode,_super);function GenericNode(){var _this=_super.call(this)||this;_this.parent=null;_this.children=[];_this.mappingName=null;_this.namedMapping={};return _this}GenericNode.prototype.appendChild=function(childNode,name){if(name&&this.namedMapping[name]){throw new Error("Name is not unique.")}if(childNode.parent){childNode.removeFromParent()}this.children.push(childNode);childNode.parent=this;if(name){childNode.mappingName=name;this.namedMapping[name]=childNode}this.propagateNotifyObservers()};GenericNode.prototype.removeChild=function(childNode){var index=this.children.indexOf(childNode);if(index===-1){return}this.children.splice(index,1);childNode.parent=null;if(childNode.mappingName){delete this.namedMapping[childNode.mappingName];childNode.mappingName=null}this.propagateNotifyObservers()};GenericNode.prototype.clearChildren=function(){this.children.forEach(function(child){child.parent=null;child.mappingName=null});this.children=[];this.namedMapping={};this.propagateNotifyObservers()};GenericNode.prototype.removeFromParent=function(){if(this.parent!==null){this.parent.removeChild(this)}};GenericNode.prototype.getChildByName=function(name){if(!this.namedMapping[name]){throw new Error("No child exists for the given name.")}return this.namedMapping[name]};GenericNode.prototype.destroyNode=function(){this.clearChildren();this.removeFromParent();this.clearObservers()};GenericNode.prototype.destroyRecursive=function(){var childReferencesCopy=this.children.slice();this.destroyNode();childReferencesCopy.forEach(function(child){child.destroyRecursive()})};GenericNode.prototype.propagateNotifyObservers=function(){this.notifyObservers();if(this.parent!==null){this.parent.propagateNotifyObservers()}};return GenericNode}(observable_1.Observable);exports.GenericNode=GenericNode},{"@daign/observable":97}],63:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.GraphicNode=void 0;var genericNode_1=require("./genericNode");var transformations_1=require("./transformations");var GraphicNode=function(_super){__extends(GraphicNode,_super);function GraphicNode(){var _this=_super.call(this)||this;_this.transformation=new transformations_1.TransformCollection;_this.presentationNodes=[];return _this}GraphicNode.prototype.registerPresentationNode=function(presentationNode){this.presentationNodes.push(presentationNode)};GraphicNode.prototype.removePresentationNode=function(presentationNode){var i=this.presentationNodes.indexOf(presentationNode);if(i>-1){this.presentationNodes.splice(i,1)}};return GraphicNode}(genericNode_1.GenericNode);exports.GraphicNode=GraphicNode},{"./genericNode":62,"./transformations":66}],64:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransformCollection=exports.MatrixTransform=exports.View=exports.PresentationNode=exports.GraphicNode=exports.GenericNode=void 0;var genericNode_1=require("./genericNode");Object.defineProperty(exports,"GenericNode",{enumerable:true,get:function(){return genericNode_1.GenericNode}});var graphicNode_1=require("./graphicNode");Object.defineProperty(exports,"GraphicNode",{enumerable:true,get:function(){return graphicNode_1.GraphicNode}});var presentationNode_1=require("./presentationNode");Object.defineProperty(exports,"PresentationNode",{enumerable:true,get:function(){return presentationNode_1.PresentationNode}});var view_1=require("./view");Object.defineProperty(exports,"View",{enumerable:true,get:function(){return view_1.View}});var matrixTransform_1=require("./transformations/matrixTransform");Object.defineProperty(exports,"MatrixTransform",{enumerable:true,get:function(){return matrixTransform_1.MatrixTransform}});var transformCollection_1=require("./transformations/transformCollection");Object.defineProperty(exports,"TransformCollection",{enumerable:true,get:function(){return transformCollection_1.TransformCollection}})},{"./genericNode":62,"./graphicNode":63,"./presentationNode":65,"./transformations/matrixTransform":67,"./transformations/transformCollection":68,"./view":69}],65:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.PresentationNode=void 0;var math_1=require("@daign/math");var genericNode_1=require("./genericNode");var PresentationNode=function(_super){__extends(PresentationNode,_super);function PresentationNode(view,sourceNode){var _this=_super.call(this)||this;_this.projectViewToNode=(new math_1.Matrix3).setIdentity();_this.projectNodeToView=(new math_1.Matrix3).setIdentity();_this.view=view;_this.sourceNode=sourceNode;_this.sourceNode.registerPresentationNode(_this);var callback=function(){_this.updateProjectionMatrices()};_this.removeSourceNodeSubscription=_this.sourceNode.transformation.subscribeToChanges(callback);return _this}PresentationNode.prototype.updateProjectionMatrices=function(){if(this.sourceNode!==null){if(this.parent!==null){this.projectNodeToView.copy(this.sourceNode.transformation.transformMatrix);this.projectNodeToView.transform(this.parent.projectNodeToView)}else{this.projectNodeToView.copy(this.sourceNode.transformation.transformMatrix)}this.projectViewToNode.setToInverse(this.projectNodeToView);this.children.forEach(function(child){child.updateProjectionMatrices()})}};PresentationNode.prototype.destroyNode=function(){_super.prototype.destroyNode.call(this);this.view=null;this.removeSourceNodeSubscription();if(this.sourceNode!==null){this.sourceNode.removePresentationNode(this);this.sourceNode=null}};return PresentationNode}(genericNode_1.GenericNode);exports.PresentationNode=PresentationNode},{"./genericNode":62,"@daign/math":85}],66:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TransformCollection=exports.MatrixTransform=void 0;var matrixTransform_1=require("./matrixTransform");Object.defineProperty(exports,"MatrixTransform",{enumerable:true,get:function(){return matrixTransform_1.MatrixTransform}});var transformCollection_1=require("./transformCollection");Object.defineProperty(exports,"TransformCollection",{enumerable:true,get:function(){return transformCollection_1.TransformCollection}})},{"./matrixTransform":67,"./transformCollection":68}],67:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.MatrixTransform=void 0;var math_1=require("@daign/math");var observable_1=require("@daign/observable");var MatrixTransform=function(_super){__extends(MatrixTransform,_super);function MatrixTransform(){var _this=_super.call(this)||this;_this._matrix=(new math_1.Matrix3).setIdentity();var callback=function(){_this.notifyObservers()};_this._matrix.subscribeToChanges(callback);return _this}Object.defineProperty(MatrixTransform.prototype,"matrix",{get:function(){return this._matrix},enumerable:false,configurable:true});return MatrixTransform}(observable_1.Observable);exports.MatrixTransform=MatrixTransform},{"@daign/math":85,"@daign/observable":97}],68:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.TransformCollection=void 0;var math_1=require("@daign/math");var TransformCollection=function(_super){__extends(TransformCollection,_super);function TransformCollection(){var _this=_super.call(this)||this;_this.transformMatrix=(new math_1.Matrix3).setIdentity();_this.inverseTransformMatrix=(new math_1.Matrix3).setIdentity();_this.subscribeToChanges(function(){_this.combineTransformations()});return _this}TransformCollection.prototype.combineTransformations=function(){var _this=this;this.transformMatrix.setIdentity();this.iterate(function(item){_this.transformMatrix.multiply(item.matrix)});try{this.inverseTransformMatrix.setToInverse(this.transformMatrix)}catch(e){}};return TransformCollection}(math_1.GenericArray);exports.TransformCollection=TransformCollection},{"@daign/math":85}],69:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.View=void 0;var graphicNode_1=require("./graphicNode");var presentationNode_1=require("./presentationNode");var View=function(_super){__extends(View,_super);function View(){var _this=_super.call(this)||this;_this.anchorNode=null;_this.anchorNodeSubscriptionRemover=null;_this.viewPresentationNode=null;return _this}View.prototype.mountNode=function(anchorNode){var _this=this;if(this.anchorNodeSubscriptionRemover!==null){this.anchorNodeSubscriptionRemover()}this.anchorNode=anchorNode;var callback=function(){_this.replicateDocumentTree()};this.anchorNodeSubscriptionRemover=this.anchorNode.subscribeToChanges(callback);this.replicateDocumentTree()};View.prototype.replicateDocumentTree=function(){this.destroyDocumentTree();if(this.anchorNode!==null){this.viewPresentationNode=new presentationNode_1.PresentationNode(this,this);this.replicateRecursive(this.viewPresentationNode,this.anchorNode);this.viewPresentationNode.updateProjectionMatrices()}};View.prototype.replicateRecursive=function(parent,sourceNode){var _this=this;var presentationNode=new presentationNode_1.PresentationNode(this,sourceNode);parent.appendChild(presentationNode);sourceNode.children.forEach(function(sourceChild){_this.replicateRecursive(presentationNode,sourceChild)})};View.prototype.destroyDocumentTree=function(){if(this.viewPresentationNode!==null){this.viewPresentationNode.destroyRecursive();this.viewPresentationNode=null}};return View}(graphicNode_1.GraphicNode);exports.View=View},{"./graphicNode":63,"./presentationNode":65}],70:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DomPool=void 0;var DomPool=function(){function DomPool(){}DomPool.get=function(nodeName,nameSpace){var key=nameSpace?nameSpace+"/"+nodeName:DomPool.xhtmlNameSpace+"/"+nodeName;if(this.pool[key]!==undefined&&this.pool[key].length>0){return this.pool[key].pop()}if(nameSpace){return document.createElementNS(nameSpace,nodeName)}return document.createElement(nodeName)};DomPool.getFresh=function(nodeName,nameSpace){if(nameSpace){return document.createElementNS(nameSpace,nodeName)}return document.createElement(nodeName)};DomPool.getSvg=function(nodeName){return DomPool.get(nodeName,DomPool.svgNameSpace)};DomPool.getFreshSvg=function(nodeName){return DomPool.getFresh(nodeName,DomPool.svgNameSpace)};DomPool.giveBack=function(node){var nodeName=node.nodeName;var nameSpace=node.namespaceURI;var key=nameSpace+"/"+nodeName;if(this.pool[key]===undefined){this.pool[key]=[]}this.pool[key].push(node)};DomPool.svgNameSpace="http://www.w3.org/2000/svg";DomPool.xhtmlNameSpace="http://www.w3.org/1999/xhtml";DomPool.pool={};return DomPool}();exports.DomPool=DomPool},{}],71:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WrappedNode=exports.WrappedDomPool=exports.DomPool=void 0;var domPool_1=require("./domPool");Object.defineProperty(exports,"DomPool",{enumerable:true,get:function(){return domPool_1.DomPool}});var wrappedDomPool_1=require("./wrappedDomPool");Object.defineProperty(exports,"WrappedDomPool",{enumerable:true,get:function(){return wrappedDomPool_1.WrappedDomPool}});var wrappedNode_1=require("./wrappedNode");Object.defineProperty(exports,"WrappedNode",{enumerable:true,get:function(){return wrappedNode_1.WrappedNode}})},{"./domPool":70,"./wrappedDomPool":72,"./wrappedNode":73}],72:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.WrappedDomPool=void 0;var wrappedNode_1=require("./wrappedNode");var WrappedDomPool=function(){function WrappedDomPool(){}WrappedDomPool.get=function(nodeName,nameSpace){var key=nameSpace?nameSpace+"/"+nodeName:WrappedDomPool.xhtmlNameSpace+"/"+nodeName;if(this.pool[key]!==undefined){var node=this.pool[key].pop();if(node!==undefined){return node}}if(nameSpace){return new wrappedNode_1.WrappedNode(nodeName,nameSpace)}return new wrappedNode_1.WrappedNode(nodeName)};WrappedDomPool.getFresh=function(nodeName,nameSpace){if(nameSpace){return new wrappedNode_1.WrappedNode(nodeName,nameSpace)}return new wrappedNode_1.WrappedNode(nodeName)};WrappedDomPool.getSvg=function(nodeName){return WrappedDomPool.get(nodeName,WrappedDomPool.svgNameSpace)};WrappedDomPool.getFreshSvg=function(nodeName){return WrappedDomPool.getFresh(nodeName,WrappedDomPool.svgNameSpace)};WrappedDomPool.giveBack=function(node){var nodeName=node.nodeName;var nameSpace=node.nameSpace;var key=nameSpace+"/"+nodeName;if(this.pool[key]===undefined){this.pool[key]=[]}node.reset();this.pool[key].push(node)};WrappedDomPool.clear=function(){for(var _i=0,_a=Object.keys(this.pool);_i<_a.length;_i++){var key=_a[_i];this.pool[key].forEach(function(node){node.destroy()});delete this.pool[key]}};WrappedDomPool.countNodes=function(){var count=0;for(var _i=0,_a=Object.keys(this.pool);_i<_a.length;_i++){var key=_a[_i];count+=this.pool[key].length}return count};WrappedDomPool.countTypes=function(){return Object.keys(this.pool).length};WrappedDomPool.svgNameSpace="http://www.w3.org/2000/svg";WrappedDomPool.xhtmlNameSpace="http://www.w3.org/1999/xhtml";WrappedDomPool.pool={};return WrappedDomPool}();exports.WrappedDomPool=WrappedDomPool},{"./wrappedNode":73}],73:[function(require,module,exports){"use strict";var __spreadArrays=this&&this.__spreadArrays||function(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;for(var r=Array(s),k=0,i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r};Object.defineProperty(exports,"__esModule",{value:true});exports.WrappedNode=void 0;var xhtmlNameSpace="http://www.w3.org/1999/xhtml";var WrappedNode=function(){function WrappedNode(nodeName,nameSpace){this._children=[];this.usedAttributes=new Set;this.removeEventListenerCallbacks=[];this._nodeName=nodeName;this._nameSpace=nameSpace?nameSpace:xhtmlNameSpace;if(nameSpace){this._domNode=document.createElementNS(nameSpace,nodeName)}else{this._domNode=document.createElement(nodeName)}}Object.defineProperty(WrappedNode.prototype,"domNode",{get:function(){return this._domNode},enumerable:false,configurable:true});Object.defineProperty(WrappedNode.prototype,"children",{get:function(){return __spreadArrays(this._children)},enumerable:false,configurable:true});Object.defineProperty(WrappedNode.prototype,"nodeName",{get:function(){return this._nodeName},enumerable:false,configurable:true});Object.defineProperty(WrappedNode.prototype,"nameSpace",{get:function(){return this._nameSpace},enumerable:false,configurable:true});Object.defineProperty(WrappedNode.prototype,"style",{get:function(){this.usedAttributes.add("style");return this._domNode.style},enumerable:false,configurable:true});Object.defineProperty(WrappedNode.prototype,"textContent",{set:function(value){this._domNode.textContent=value},enumerable:false,configurable:true});WrappedNode.prototype.appendChild=function(childNode){this._children.push(childNode);this._domNode.appendChild(childNode.domNode)};WrappedNode.prototype.clearChildren=function(){this._children=[];while(this._domNode.firstChild){this._domNode.removeChild(this._domNode.firstChild)}};WrappedNode.prototype.setAttribute=function(attributeName,value){this._domNode.setAttribute(attributeName,value);this.usedAttributes.add(attributeName)};WrappedNode.prototype.removeAttribute=function(attributeName){this._domNode.removeAttribute(attributeName)};WrappedNode.prototype.addEventListener=function(eventType,listener,useCapture){var _this=this;this._domNode.addEventListener(eventType,listener,useCapture);var removeCallback=function(){_this._domNode.removeEventListener(eventType,listener,useCapture)};this.removeEventListenerCallbacks.push(removeCallback);return removeCallback};WrappedNode.prototype.reset=function(){var _this=this;this.clearChildren();this.textContent="";this.usedAttributes.forEach(function(attributeName){_this.removeAttribute(attributeName)});this.usedAttributes.clear();this.removeEventListenerCallbacks.forEach(function(callback){callback()});this.removeEventListenerCallbacks=[]};WrappedNode.prototype.destroy=function(){this.reset();this._domNode=null};return WrappedNode}();exports.WrappedNode=WrappedNode},{}],74:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ClickHandle=void 0;var math_1=require("@daign/math");var ClickHandle=function(){function ClickHandle(config){var _this=this;this.absoluteExtractFromEvent=function(event){return(new math_1.Vector2).setFromEvent(event)};this.enabled=true;this.clicked=function(){};this.beginClick=function(event){if(!_this.enabled){return}event.preventDefault();event.stopPropagation();_this._position=undefined;try{var position=_this.extractFromEvent(event);_this._position=position}catch(_a){}_this.clicked(event)};this.node=config.startNode;if(config.extractFromEvent){this.extractFromEvent=config.extractFromEvent}else{this.extractFromEvent=this.absoluteExtractFromEvent}this.node.addEventListener("click",this.beginClick,false)}Object.defineProperty(ClickHandle.prototype,"position",{get:function(){return this._position},enumerable:false,configurable:true});ClickHandle.prototype.destroy=function(){if(this.node){this.node.removeEventListener("click",this.beginClick,false);this.node=null}};return ClickHandle}();exports.ClickHandle=ClickHandle},{"@daign/math":85}],75:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Handle=void 0;var math_1=require("@daign/math");var schedule_1=require("@daign/schedule");var isPassiveSupported_1=require("./isPassiveSupported");var Handle=function(){function Handle(config){var _this=this;this.minimumDragDistance=5;this.absoluteExtractFromEvent=function(event){return(new math_1.Vector2).setFromEvent(event)};this.throttleInterval=40;this.enabled=true;this.beginning=function(){return false};this.continuing=function(){};this.ending=function(){};this.clicked=function(){};this.cleanup=function(){};this.beginDrag=function(startEvent){if(!_this.enabled){return}console.log("startEvent",startEvent);startEvent.preventDefault();startEvent.stopPropagation();console.log("test2");var dragged=false;_this._start=undefined;_this._absoluteStart=undefined;_this._temp=undefined;_this._delta=undefined;try{var startPosition=_this.extractFromEvent(startEvent);var absoluteStartPosition=_this.absoluteExtractFromEvent(startEvent);_this._start=startPosition;_this._absoluteStart=absoluteStartPosition}catch(_a){return}if(_this.beginning(startEvent)){var cancelSelect_1=function(selectEvent){selectEvent.preventDefault();selectEvent.stopPropagation()};var continueDrag=function(moveEvent){moveEvent.preventDefault();moveEvent.stopPropagation();if(_this._start===undefined||_this._absoluteStart===undefined){return}try{var absoluteTemp=_this.absoluteExtractFromEvent(moveEvent);_this._delta=absoluteTemp.clone().sub(_this._absoluteStart);_this._temp=_this._start.clone().add(_this._delta)}catch(_a){return}if(!dragged){if(_this._delta.length()>=_this.minimumDragDistance){dragged=true}else{return}}_this.continuing(moveEvent)};var throttledContinue_1=schedule_1.Schedule.deferringThrottle(continueDrag,_this.throttleInterval,_this);var endDrag_1=function(endEvent){endEvent.preventDefault();endEvent.stopPropagation();if(_this._start!==undefined&&_this._absoluteStart!==undefined){try{var absoluteTemp=_this.absoluteExtractFromEvent(endEvent);_this._delta=absoluteTemp.clone().sub(_this._absoluteStart);_this._temp=_this._start.clone().add(_this._delta)}catch(_a){}if(dragged){_this.ending(endEvent)}else{_this.clicked(endEvent)}}document.removeEventListener("mousemove",throttledContinue_1,false);document.removeEventListener("touchmove",throttledContinue_1,false);document.removeEventListener("selectstart",cancelSelect_1,false);document.removeEventListener("mouseup",endDrag_1,false);document.removeEventListener("touchend",endDrag_1,false);document.removeEventListener("touchcancel",endDrag_1,false);document.removeEventListener("touchleave",endDrag_1,false);_this.cleanup()};document.addEventListener("mousemove",throttledContinue_1,_this.eventListenerOptions);document.addEventListener("touchmove",throttledContinue_1,_this.eventListenerOptions);document.addEventListener("selectstart",cancelSelect_1,_this.eventListenerOptions);document.addEventListener("mouseup",endDrag_1,_this.eventListenerOptions);document.addEventListener("touchend",endDrag_1,_this.eventListenerOptions);document.addEventListener("touchcancel",endDrag_1,_this.eventListenerOptions);document.addEventListener("touchleave",endDrag_1,_this.eventListenerOptions)}};this.node=config.startNode;if(config.minimumDragDistance!==undefined){this.minimumDragDistance=config.minimumDragDistance}if(config.extractFromEvent){this.extractFromEvent=config.extractFromEvent}else{this.extractFromEvent=this.absoluteExtractFromEvent}if(config.throttleInterval!==undefined){this.throttleInterval=config.throttleInterval}var passiveSupported=(0,isPassiveSupported_1.isPassiveSupported)();if(passiveSupported){var options={passive:false};this.eventListenerOptions=options}else{this.eventListenerOptions=false}this.node.addEventListener("mousedown",this.beginDrag,this.eventListenerOptions);this.node.addEventListener("touchstart",this.beginDrag,this.eventListenerOptions)}Object.defineProperty(Handle.prototype,"start",{get:function(){return this._start},enumerable:false,configurable:true});Object.defineProperty(Handle.prototype,"temp",{get:function(){return this._temp},enumerable:false,configurable:true});Object.defineProperty(Handle.prototype,"delta",{get:function(){return this._delta},enumerable:false,configurable:true});Handle.prototype.destroy=function(){if(this.node){this.node.removeEventListener("mousedown",this.beginDrag,false);this.node.removeEventListener("touchstart",this.beginDrag,false);this.node=null}};return Handle}();exports.Handle=Handle},{"./isPassiveSupported":77,"@daign/math":85,"@daign/schedule":99}],76:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ScrollHandle=exports.MultiTouchScrollHandle=exports.MultiTouchHandle=exports.isPassiveSupported=exports.Handle=exports.ClickHandle=void 0;var clickHandle_1=require("./clickHandle");Object.defineProperty(exports,"ClickHandle",{enumerable:true,get:function(){return clickHandle_1.ClickHandle}});var handle_1=require("./handle");Object.defineProperty(exports,"Handle",{enumerable:true,get:function(){return handle_1.Handle}});var isPassiveSupported_1=require("./isPassiveSupported");Object.defineProperty(exports,"isPassiveSupported",{enumerable:true,get:function(){return isPassiveSupported_1.isPassiveSupported}});var multiTouchHandle_1=require("./multiTouchHandle");Object.defineProperty(exports,"MultiTouchHandle",{enumerable:true,get:function(){return multiTouchHandle_1.MultiTouchHandle}});var multiTouchScrollHandle_1=require("./multiTouchScrollHandle");Object.defineProperty(exports,"MultiTouchScrollHandle",{enumerable:true,get:function(){return multiTouchScrollHandle_1.MultiTouchScrollHandle}});var scrollHandle_1=require("./scrollHandle");Object.defineProperty(exports,"ScrollHandle",{enumerable:true,get:function(){return scrollHandle_1.ScrollHandle}})},{"./clickHandle":74,"./handle":75,"./isPassiveSupported":77,"./multiTouchHandle":78,"./multiTouchScrollHandle":79,"./scrollHandle":80}],77:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isPassiveSupported=void 0;var isPassiveSupported=function(){var supported=false;try{var options={get passive(){supported=true;return false}};var callback=function(){};window.addEventListener("click",callback,options);window.removeEventListener("click",callback,false)}catch(_a){supported=false}return supported};exports.isPassiveSupported=isPassiveSupported},{}],78:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MultiTouchHandle=void 0;var math_1=require("@daign/math");var schedule_1=require("@daign/schedule");var isPassiveSupported_1=require("./isPassiveSupported");var MultiTouchHandle=function(){function MultiTouchHandle(config){var _this=this;this.minimumDragDistance=5;this.absoluteExtractFromEvent=function(event){return(new math_1.Vector2).setFromEvent(event)};this.absoluteExtractFromTouchEvent=function(event,touchIndex){return(new math_1.Vector2).setFromTouchEvent(event,touchIndex)};this.throttleInterval=40;this._startPositions=[];this._absoluteStartPositions=[];this._tempPositions=[];this._deltaVectors=[];this.enabled=true;this.beginning=function(){return false};this.continuing=function(){};this.ending=function(){};this.clicked=function(){};this.cleanup=function(){};this.beginDrag=function(startEvent){if(!_this.enabled){return}startEvent.preventDefault();startEvent.stopPropagation();var dragged=false;_this._startPositions=[];_this._absoluteStartPositions=[];_this._tempPositions=[];_this._deltaVectors=[];if(startEvent&&startEvent.touches&&startEvent.touches.length>0){var touchPoints=startEvent.touches.length;try{for(var i=0;i<touchPoints;i+=1){var position=_this.extractFromTouchEvent(startEvent,i);_this._startPositions.push(position);var absolutePosition=_this.absoluteExtractFromTouchEvent(startEvent,i);_this._absoluteStartPositions.push(absolutePosition);_this._deltaVectors.push(new math_1.Vector2);_this._tempPositions.push(position.clone())}}catch(_a){return}}else{try{var position=_this.extractFromEvent(startEvent);_this._startPositions.push(position);var absolutePosition=_this.absoluteExtractFromEvent(startEvent);_this._absoluteStartPositions.push(absolutePosition);_this._deltaVectors.push(new math_1.Vector2);_this._tempPositions.push(position.clone())}catch(_b){return}}if(_this.beginning(startEvent)){var cancelSelect_1=function(selectEvent){selectEvent.preventDefault();selectEvent.stopPropagation()};var continueDrag=function(moveEvent){moveEvent.preventDefault();moveEvent.stopPropagation();try{_this.updatePositions(moveEvent)}catch(_a){return}if(!dragged){if(_this._deltaVectors.some(function(delta){return delta.length()>=_this.minimumDragDistance})){dragged=true}else{return}}_this.continuing(moveEvent)};var throttledContinue_1=schedule_1.Schedule.deferringThrottle(continueDrag,_this.throttleInterval,_this);var endDrag_1=function(endEvent){endEvent.preventDefault();endEvent.stopPropagation();try{_this.updatePositions(endEvent)}catch(_a){}if(dragged){_this.ending(endEvent)}else{_this.clicked(endEvent)}document.removeEventListener("mousemove",throttledContinue_1,false);document.removeEventListener("touchmove",throttledContinue_1,false);document.removeEventListener("selectstart",cancelSelect_1,false);document.removeEventListener("mouseup",endDrag_1,false);document.removeEventListener("touchend",endDrag_1,false);document.removeEventListener("touchcancel",endDrag_1,false);document.removeEventListener("touchleave",endDrag_1,false);_this.cleanup()};document.addEventListener("mousemove",throttledContinue_1,_this.eventListenerOptions);document.addEventListener("touchmove",throttledContinue_1,_this.eventListenerOptions);document.addEventListener("selectstart",cancelSelect_1,_this.eventListenerOptions);document.addEventListener("mouseup",endDrag_1,_this.eventListenerOptions);document.addEventListener("touchend",endDrag_1,_this.eventListenerOptions);document.addEventListener("touchcancel",endDrag_1,_this.eventListenerOptions);document.addEventListener("touchleave",endDrag_1,_this.eventListenerOptions)}};this.node=config.startNode;if(config.minimumDragDistance!==undefined){this.minimumDragDistance=config.minimumDragDistance}if(config.extractFromEvent){this.extractFromEvent=config.extractFromEvent}else{this.extractFromEvent=this.absoluteExtractFromEvent}if(config.extractFromTouchEvent){this.extractFromTouchEvent=config.extractFromTouchEvent}else{this.extractFromTouchEvent=this.absoluteExtractFromTouchEvent}if(config.throttleInterval!==undefined){this.throttleInterval=config.throttleInterval}var passiveSupported=(0,isPassiveSupported_1.isPassiveSupported)();if(passiveSupported){var options={passive:false};this.eventListenerOptions=options}else{this.eventListenerOptions=false}this.node.addEventListener("mousedown",this.beginDrag,this.eventListenerOptions);this.node.addEventListener("touchstart",this.beginDrag,this.eventListenerOptions)}MultiTouchHandle.prototype.getStartPosition=function(index){return this._startPositions[index]};MultiTouchHandle.prototype.getTempPosition=function(index){return this._tempPositions[index]};MultiTouchHandle.prototype.getDelta=function(index){return this._deltaVectors[index]};MultiTouchHandle.prototype.destroy=function(){if(this.node){this.node.removeEventListener("mousedown",this.beginDrag,false);this.node.removeEventListener("touchstart",this.beginDrag,false);this.node=null}};MultiTouchHandle.prototype.updatePositions=function(event){if(this._startPositions.length===0||this._absoluteStartPositions.length===0||this._tempPositions.length===0||this._deltaVectors.length===0){throw new Error("Missing start positions to calculate drag.")}if(event&&event.touches&&event.touches.length>0){var touchPoints=event.touches.length;for(var i=0;i<touchPoints;i+=1){var absoluteTemp=this.absoluteExtractFromTouchEvent(event,i);if(i<this._startPositions.length){this._deltaVectors[i].copy(absoluteTemp).sub(this._absoluteStartPositions[i]);this._tempPositions[i].copy(this._startPositions[i]).add(this._deltaVectors[i])}}}else{var absoluteTemp=this.absoluteExtractFromEvent(event);this._deltaVectors[0].copy(absoluteTemp).sub(this._absoluteStartPositions[0]);this._tempPositions[0].copy(this._startPositions[0]).add(this._deltaVectors[0])}};return MultiTouchHandle}();exports.MultiTouchHandle=MultiTouchHandle},{"./isPassiveSupported":77,"@daign/math":85,"@daign/schedule":99}],79:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.MultiTouchScrollHandle=void 0;var math_1=require("@daign/math");var multiTouchHandle_1=require("./multiTouchHandle");var MultiTouchScrollHandle=function(_super){__extends(MultiTouchScrollHandle,_super);function MultiTouchScrollHandle(config){var _this=_super.call(this,config)||this;_this._scroll=new math_1.Vector2;_this._scrollMode=0;_this._scrollPosition=new math_1.Vector2;_this.scrolling=function(){};_this.beginScroll=function(scrollEvent){if(!_this.enabled){return true}scrollEvent.preventDefault();scrollEvent.stopPropagation();try{_this._scroll.setFromScrollEvent(scrollEvent);_this._scrollMode=scrollEvent.deltaMode;_this._scrollPosition.copy(_this.extractFromEvent(scrollEvent));_this.scrolling()}catch(_a){}return false};_this.node.addEventListener("wheel",_this.beginScroll,false);return _this}Object.defineProperty(MultiTouchScrollHandle.prototype,"scroll",{get:function(){return this._scroll},enumerable:false,configurable:true});Object.defineProperty(MultiTouchScrollHandle.prototype,"scrollMode",{get:function(){return this._scrollMode},enumerable:false,configurable:true});Object.defineProperty(MultiTouchScrollHandle.prototype,"scrollPosition",{get:function(){return this._scrollPosition},enumerable:false,configurable:true});MultiTouchScrollHandle.prototype.destroy=function(){if(this.node){this.node.removeEventListener("wheel",this.beginScroll,false)}_super.prototype.destroy.call(this)};return MultiTouchScrollHandle}(multiTouchHandle_1.MultiTouchHandle);exports.MultiTouchScrollHandle=MultiTouchScrollHandle},{"./multiTouchHandle":78,"@daign/math":85}],80:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.ScrollHandle=void 0;var math_1=require("@daign/math");var handle_1=require("./handle");var ScrollHandle=function(_super){__extends(ScrollHandle,_super);function ScrollHandle(config){var _this=_super.call(this,config)||this;_this._scroll=new math_1.Vector2;_this._scrollMode=0;_this._scrollPosition=new math_1.Vector2;_this.scrolling=function(){};_this.beginScroll=function(scrollEvent){if(!_this.enabled){return true}scrollEvent.preventDefault();scrollEvent.stopPropagation();try{_this._scroll.setFromScrollEvent(scrollEvent);_this._scrollMode=scrollEvent.deltaMode;_this._scrollPosition.copy(_this.extractFromEvent(scrollEvent));_this.scrolling()}catch(_a){}return false};_this.node.addEventListener("wheel",_this.beginScroll,false);return _this}Object.defineProperty(ScrollHandle.prototype,"scroll",{get:function(){return this._scroll},enumerable:false,configurable:true});Object.defineProperty(ScrollHandle.prototype,"scrollMode",{get:function(){return this._scrollMode},enumerable:false,configurable:true});Object.defineProperty(ScrollHandle.prototype,"scrollPosition",{get:function(){return this._scrollPosition},enumerable:false,configurable:true});ScrollHandle.prototype.destroy=function(){if(this.node){this.node.removeEventListener("wheel",this.beginScroll,false)}_super.prototype.destroy.call(this)};return ScrollHandle}(handle_1.Handle);exports.ScrollHandle=ScrollHandle},{"./handle":75,"@daign/math":85}],81:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.Angle=void 0;var vector1_1=require("./vector1");var Angle=function(_super){__extends(Angle,_super);function Angle(radians){return _super.call(this,radians)||this}Object.defineProperty(Angle.prototype,"radians",{get:function(){return this.x},set:function(value){this.x=value},enumerable:false,configurable:true});Object.defineProperty(Angle.prototype,"degrees",{get:function(){return this.radians*180/Math.PI},set:function(value){this.radians=value*Math.PI/180},enumerable:false,configurable:true});Angle.prototype.getThis=function(){return this};Angle.prototype.setRadians=function(value){this.radians=value;return this};Angle.prototype.setDegrees=function(value){this.degrees=value;return this};Angle.prototype.clone=function(){return new Angle(this.radians)};Angle.prototype.reduce=function(){this.radians=this.radians%(2*Math.PI);return this};Angle.prototype.normalize=function(){var value=this.radians%(2*Math.PI);value=(2*Math.PI+value)%(2*Math.PI);this.radians=value;return this};Angle.prototype.normalizeMinimumAbsolute=function(){var value=this.radians%(2*Math.PI);value=(2*Math.PI+value)%(2*Math.PI);if(value>Math.PI){value-=2*Math.PI}this.radians=value;return this};Angle.prototype.roundDegrees=function(precision){if(precision){var factor=Math.pow(10,precision);this.degrees=Math.round((this.degrees+Number.EPSILON)*factor)/factor}else{this.degrees=Math.round(this.degrees)}return this};return Angle}(vector1_1.Vector1);exports.Angle=Angle},{"./vector1":93}],82:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.Box2=void 0;var observable_1=require("@daign/observable");var vector2_1=require("./vector2");var Box2=function(_super){__extends(Box2,_super);function Box2(min,max){var _this=_super.call(this)||this;_this._min=min||new vector2_1.Vector2(+Infinity,+Infinity);_this._max=max||new vector2_1.Vector2(-Infinity,-Infinity);var callback=function(){_this.notifyObservers()};_this._min.subscribeToChanges(callback);_this._max.subscribeToChanges(callback);return _this}Object.defineProperty(Box2.prototype,"min",{get:function(){return this._min.clone()},enumerable:false,configurable:true});Object.defineProperty(Box2.prototype,"max",{get:function(){return this._max.clone()},enumerable:false,configurable:true});Object.defineProperty(Box2.prototype,"isEmpty",{get:function(){return this._max.x<this._min.x||this._max.y<this._min.y},enumerable:false,configurable:true});Object.defineProperty(Box2.prototype,"isArea",{get:function(){return this._max.x>this._min.x&&this._max.y>this._min.y},enumerable:false,configurable:true});Object.defineProperty(Box2.prototype,"size",{get:function(){if(this.isEmpty){return new vector2_1.Vector2(0,0)}return this._max.clone().sub(this._min)},enumerable:false,configurable:true});Object.defineProperty(Box2.prototype,"center",{get:function(){if(this.isEmpty){return new vector2_1.Vector2(0,0)}return this._min.clone().add(this.size.multiplyScalar(.5))},enumerable:false,configurable:true});Box2.prototype.copy=function(b){this._min.copy(b.min);this._max.copy(b.max);return this};Box2.prototype.clone=function(){return new Box2(this.min,this.max)};Box2.prototype.equals=function(b){return this.min.equals(b.min)&&this.max.equals(b.max)};Box2.prototype.makeEmpty=function(){this._min.x=this._min.y=+Infinity;this._max.x=this._max.y=-Infinity;return this};Box2.prototype.expandByScalar=function(s){var offset=new vector2_1.Vector2(s,s);var minimumOffset=this.size.multiplyScalar(-.5);offset.max(minimumOffset);this._min.sub(offset);this._max.add(offset);return this};Box2.prototype.scale=function(s){var difference=this.size.multiplyScalar((Math.abs(s)-1)/2);this._min.sub(difference);this._max.add(difference);return this};Box2.prototype.expandByPoint=function(p){this._min.min(p);this._max.max(p);return this};Box2.prototype.expandByBox=function(b){this._min.min(b.min);this._max.max(b.max);return this};Box2.prototype.transform=function(m){if(this.isEmpty){return this}var corner1=this.min.transform(m);var corner2=this.max.transform(m);var corner3=new vector2_1.Vector2(this.min.x,this.max.y).transform(m);var corner4=new vector2_1.Vector2(this.max.x,this.min.y).transform(m);this.makeEmpty();this.expandByPoint(corner1);this.expandByPoint(corner2);this.expandByPoint(corner3);this.expandByPoint(corner4);return this};Box2.prototype.containsPoint=function(p){return!(p.x<this.min.x||p.x>this.max.x||p.y<this.min.y||p.y>this.max.y)};Box2.prototype.containsBox=function(b){return this.min.x<=b.min.x&&b.max.x<=this.max.x&&this.min.y<=b.min.y&&b.max.y<=this.max.y};return Box2}(observable_1.Observable);exports.Box2=Box2},{"./vector2":94,"@daign/observable":97}],83:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.ComplexNumber=void 0;var observable_1=require("@daign/observable");var mathHelper_1=require("./mathHelper");var ComplexNumber=function(_super){__extends(ComplexNumber,_super);function ComplexNumber(real,imaginary){var _this=_super.call(this)||this;_this._real=real||0;_this._imaginary=imaginary||0;return _this}Object.defineProperty(ComplexNumber.prototype,"real",{get:function(){return this._real},set:function(value){if(this._real!==value){this._real=value;this.notifyObservers()}},enumerable:false,configurable:true});Object.defineProperty(ComplexNumber.prototype,"imaginary",{get:function(){return this._imaginary},set:function(value){if(this._imaginary!==value){this._imaginary=value;this.notifyObservers()}},enumerable:false,configurable:true});Object.defineProperty(ComplexNumber.prototype,"absolute",{get:function(){var a=this.real;var b=this.imaginary;return Math.sqrt(a*a+b*b)},enumerable:false,configurable:true});Object.defineProperty(ComplexNumber.prototype,"argument",{get:function(){return Math.atan2(this.imaginary,this.real)},enumerable:false,configurable:true});ComplexNumber.prototype.set=function(real,imaginary){if(this._real!==real||this._imaginary!==imaginary){this._real=real;this._imaginary=imaginary;this.notifyObservers()}return this};ComplexNumber.prototype.setSilent=function(real,imaginary){this._real=real;this._imaginary=imaginary;return this};ComplexNumber.prototype.copy=function(c){this.set(c.real,c.imaginary);return this};ComplexNumber.prototype.clone=function(){return new ComplexNumber(this.real,this.imaginary)};ComplexNumber.prototype.equals=function(c){return this.real===c.real&&this.imaginary===c.imaginary};ComplexNumber.prototype.closeTo=function(c,delta){return mathHelper_1.MathHelper.closeTo(this.real,c.real,delta)&&mathHelper_1.MathHelper.closeTo(this.imaginary,c.imaginary,delta)};ComplexNumber.prototype.add=function(c){this.set(this.real+c.real,this.imaginary+c.imaginary);return this};ComplexNumber.prototype.sub=function(c){this.set(this.real-c.real,this.imaginary-c.imaginary);return this};ComplexNumber.prototype.multiply=function(cn){var a=this.real;var b=this.imaginary;var c=cn.real;var d=cn.imaginary;var real=a*c-b*d;var imaginary=b*c+a*d;this.set(real,imaginary);return this};ComplexNumber.prototype.divide=function(cn){var a=this.real;var b=this.imaginary;var c=cn.real;var d=cn.imaginary;var real=(a*c+b*d)/(c*c+d*d);var imaginary=(b*c-a*d)/(c*c+d*d);this.set(real,imaginary);return this};ComplexNumber.prototype.log=function(){var real=Math.log(this.absolute);var imaginary=this.argument;this.set(real,imaginary);return this};ComplexNumber.prototype.atan=function(){var a=this.real;var b=this.imaginary;var x=1+2*b+b*b+a*a;var result=new ComplexNumber((1-b*b-a*a)/x,2*a/x);result.log();result.multiply(new ComplexNumber(0,-.5));this.copy(result);return this};ComplexNumber.fromSqrt=function(value){var a=Math.sqrt(Math.abs(value));if(value<0){return new ComplexNumber(0,a)}return new ComplexNumber(a,0)};ComplexNumber.fromAsin=function(value){var result=ComplexNumber.fromSqrt(1-value*value);result.add(new ComplexNumber(0,value));result.log();result.multiply(new ComplexNumber(0,-1));return result};ComplexNumber.fromAcos=function(value){var result=new ComplexNumber(Math.PI/2,0);result.sub(ComplexNumber.fromAsin(value));return result};return ComplexNumber}(observable_1.Observable);exports.ComplexNumber=ComplexNumber},{"./mathHelper":87,"@daign/observable":97}],84:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __spreadArray=this&&this.__spreadArray||function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++){if(ar||!(i in from)){if(!ar)ar=Array.prototype.slice.call(from,0,i);ar[i]=from[i]}}return to.concat(ar||Array.prototype.slice.call(from))};Object.defineProperty(exports,"__esModule",{value:true});exports.GenericArray=void 0;var observable_1=require("@daign/observable");var GenericArray=function(_super){__extends(GenericArray,_super);function GenericArray(){var _this=_super.call(this)||this;_this._elements=[];_this.subscriptionRemovers=[];_this.namedMapping={};return _this}Object.defineProperty(GenericArray.prototype,"elements",{get:function(){return __spreadArray([],this._elements,true)},set:function(elements){var _this=this;this.subscriptionRemovers.forEach(function(remover){remover()});this.namedMapping={};this._elements=__spreadArray([],elements,true);this.subscriptionRemovers=this._elements.map(function(element){var subscriptionRemover=element.subscribeToChanges(function(){_this.notifyObservers()});return subscriptionRemover});this.notifyObservers()},enumerable:false,configurable:true});Object.defineProperty(GenericArray.prototype,"length",{get:function(){return this._elements.length},enumerable:false,configurable:true});Object.defineProperty(GenericArray.prototype,"names",{get:function(){return Object.keys(this.namedMapping)},enumerable:false,configurable:true});GenericArray.prototype.containsName=function(name){return name in this.namedMapping};GenericArray.prototype.copyElements=function(arr){this.elements=arr.elements;return this};GenericArray.prototype.getElement=function(index){return this._elements[index]};GenericArray.prototype.getByName=function(name){if(!this.containsName(name)){throw new Error("No element exists for the given name.")}return this.namedMapping[name]};GenericArray.prototype.assignName=function(name,index){if(this.containsName(name)){throw new Error("Name is not unique.")}if(index>=this.length){throw new Error("The index of the element to be named is out of bounds.")}this.namedMapping[name]=this._elements[index];return this};GenericArray.prototype.removeName=function(name){if(!this.containsName(name)){throw new Error("Name does not exist in mapping.")}delete this.namedMapping[name];return this};GenericArray.prototype.push=function(element,name){var _this=this;if(name&&this.containsName(name)){throw new Error("Name is not unique.")}this._elements.push(element);if(name){this.namedMapping[name]=element}var subscriptionRemover=element.subscribeToChanges(function(){_this.notifyObservers()});this.subscriptionRemovers.push(subscriptionRemover);this.notifyObservers();return this};GenericArray.prototype.insert=function(element,index,name){var _this=this;if(name&&this.containsName(name)){throw new Error("Name is not unique.")}if(index<0||index>this._elements.length){throw new Error("The index is out of bounds for array insertion.")}this._elements.splice(index,0,element);if(name){this.namedMapping[name]=element}var subscriptionRemover=element.subscribeToChanges(function(){_this.notifyObservers()});this.subscriptionRemovers.push(subscriptionRemover);this.notifyObservers();return this};GenericArray.prototype.pop=function(){var result=this._elements.pop();var subscriptionRemover=this.subscriptionRemovers.pop();if(subscriptionRemover!==undefined){subscriptionRemover()}if(result!==undefined){this.notifyObservers()}return result};GenericArray.prototype.remove=function(index){if(index<0||index>=this._elements.length){throw new Error("The index is out of bounds for removal from array.")}var result=this._elements.splice(index,1)[0];var subscriptionRemover=this.subscriptionRemovers.splice(index,1)[0];subscriptionRemover();this.notifyObservers();return result};GenericArray.prototype.iterate=function(callback){this._elements.forEach(function(element,index){callback(element,index)});return this};GenericArray.prototype.iteratePairwise=function(callback){for(var i=0;i<this._elements.length-1;i+=1){callback(this._elements[i],this._elements[i+1],i)}return this};return GenericArray}(observable_1.Observable);exports.GenericArray=GenericArray},{"@daign/observable":97}],85:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Vector3=exports.Vector2Array=exports.Vector2=exports.Vector1=exports.Value=exports.Triangle2=exports.StringValue=exports.StringArray=exports.Matrix3=exports.MathHelper=exports.Line2=exports.GenericArray=exports.ComplexNumber=exports.Box2=exports.Angle=void 0;var angle_1=require("./angle");Object.defineProperty(exports,"Angle",{enumerable:true,get:function(){return angle_1.Angle}});var box2_1=require("./box2");Object.defineProperty(exports,"Box2",{enumerable:true,get:function(){return box2_1.Box2}});var complexNumber_1=require("./complexNumber");Object.defineProperty(exports,"ComplexNumber",{enumerable:true,get:function(){return complexNumber_1.ComplexNumber}});var genericArray_1=require("./genericArray");Object.defineProperty(exports,"GenericArray",{enumerable:true,get:function(){return genericArray_1.GenericArray}});var line2_1=require("./line2");Object.defineProperty(exports,"Line2",{enumerable:true,get:function(){return line2_1.Line2}});var mathHelper_1=require("./mathHelper");Object.defineProperty(exports,"MathHelper",{enumerable:true,get:function(){return mathHelper_1.MathHelper}});var matrix3_1=require("./matrix3");Object.defineProperty(exports,"Matrix3",{enumerable:true,get:function(){return matrix3_1.Matrix3}});var stringArray_1=require("./stringArray");Object.defineProperty(exports,"StringArray",{enumerable:true,get:function(){return stringArray_1.StringArray}});var stringValue_1=require("./stringValue");Object.defineProperty(exports,"StringValue",{enumerable:true,get:function(){return stringValue_1.StringValue}});var triangle2_1=require("./triangle2");Object.defineProperty(exports,"Triangle2",{enumerable:true,get:function(){return triangle2_1.Triangle2}});var value_1=require("./value");Object.defineProperty(exports,"Value",{enumerable:true,get:function(){return value_1.Value}});var vector1_1=require("./vector1");Object.defineProperty(exports,"Vector1",{enumerable:true,get:function(){return vector1_1.Vector1}});var vector2_1=require("./vector2");Object.defineProperty(exports,"Vector2",{enumerable:true,get:function(){return vector2_1.Vector2}});var vector2Array_1=require("./vector2Array");Object.defineProperty(exports,"Vector2Array",{enumerable:true,get:function(){return vector2Array_1.Vector2Array}});var vector3_1=require("./vector3");Object.defineProperty(exports,"Vector3",{enumerable:true,get:function(){return vector3_1.Vector3}})},{"./angle":81,"./box2":82,"./complexNumber":83,"./genericArray":84,"./line2":86,"./mathHelper":87,"./matrix3":88,"./stringArray":89,"./stringValue":90,"./triangle2":91,"./value":92,"./vector1":93,"./vector2":94,"./vector2Array":95,"./vector3":96}],86:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.Line2=void 0;var observable_1=require("@daign/observable");var vector2_1=require("./vector2");var Line2=function(_super){__extends(Line2,_super);function Line2(start,end){var _this=_super.call(this)||this;_this._start=start||new vector2_1.Vector2;_this._end=end||new vector2_1.Vector2;var callback=function(){_this.notifyObservers()};_this._start.subscribeToChanges(callback);_this._end.subscribeToChanges(callback);return _this}Object.defineProperty(Line2.prototype,"start",{get:function(){return this._start},enumerable:false,configurable:true});Object.defineProperty(Line2.prototype,"end",{get:function(){return this._end},enumerable:false,configurable:true});Object.defineProperty(Line2.prototype,"direction",{get:function(){return this.end.clone().sub(this.start)},enumerable:false,configurable:true});Line2.prototype.copy=function(l){this.start.copy(l.start);this.end.copy(l.end);return this};Line2.prototype.clone=function(){return new Line2(this.start.clone(),this.end.clone())};Line2.prototype.equals=function(l){return this.start.equals(l.start)&&this.end.equals(l.end)};Line2.prototype.getCenter=function(){return this.start.clone().add(this.end).multiplyScalar(.5)};Line2.prototype.interpolate=function(t){return this.direction.multiplyScalar(t).add(this.start)};Line2.prototype.isParallel=function(l){var direction1=this.direction;var direction2=l.direction;return direction1.x*direction2.y===direction2.x*direction1.y};Line2.prototype.isPerpendicular=function(l){var direction1=this.direction;var direction2=l.direction;return direction1.dot(direction2)===0};Line2.prototype.getIntersection=function(l){var ax=this.start.x;var ay=this.start.y;var bx=this.end.x;var by=this.end.y;var cx=l.start.x;var cy=l.start.y;var dx=l.end.x;var dy=l.end.y;var n=(bx-ax)*(dy-cy)-(by-ay)*(dx-cx);if(n!==0){var s=((ax-cx)*(dy-cy)-(ay-cy)*(dx-cx))/-n;var x=ax+s*(bx-ax);var y=ay+s*(by-ay);return new vector2_1.Vector2(x,y)}return null};Line2.prototype.getSegmentIntersection=function(l){var ax=this.start.x;var ay=this.start.y;var bx=this.end.x;var by=this.end.y;var cx=l.start.x;var cy=l.start.y;var dx=l.end.x;var dy=l.end.y;var n=(bx-ax)*(dy-cy)-(by-ay)*(dx-cx);if(n!==0){var s=((ax-cx)*(dy-cy)-(ay-cy)*(dx-cx))/-n;var t=((cx-ax)*(by-ay)-(cy-ay)*(bx-ax))/n;if(0<=s&&s<=1&&0<=t&&t<=1){var x=ax+s*(bx-ax);var y=ay+s*(by-ay);return new vector2_1.Vector2(x,y)}}return null};Line2.prototype.getSideOfPoint=function(p){var d=this.direction.cross(p.clone().sub(this.start));var sign=function(x){return Number(x>0)-Number(x<0)};return sign(d)};return Line2}(observable_1.Observable);exports.Line2=Line2},{"./vector2":94,"@daign/observable":97}],87:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MathHelper=void 0;var MathHelper=function(){function MathHelper(){}MathHelper.clamp=function(value,min,max){return Math.max(min,Math.min(max,value))};MathHelper.lerp=function(x,y,t){return(1-t)*x+t*y};MathHelper.closeTo=function(x,y,delta){var epsilon=2220446049250313e-31;var d=delta!==undefined?delta:epsilon;return Math.abs(x-y)<d};return MathHelper}();exports.MathHelper=MathHelper},{}],88:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var __spreadArray=this&&this.__spreadArray||function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++){if(ar||!(i in from)){if(!ar)ar=Array.prototype.slice.call(from,0,i);ar[i]=from[i]}}return to.concat(ar||Array.prototype.slice.call(from))};Object.defineProperty(exports,"__esModule",{value:true});exports.Matrix3=void 0;var observable_1=require("@daign/observable");var Matrix3=function(_super){__extends(Matrix3,_super);function Matrix3(a11,a12,a13,a21,a22,a23,a31,a32,a33){var _this=_super.call(this)||this;_this._elements=[];var e=_this._elements;e[0]=a11||0;e[1]=a12||0;e[2]=a13||0;e[3]=a21||0;e[4]=a22||0;e[5]=a23||0;e[6]=a31||0;e[7]=a32||0;e[8]=a33||0;return _this}Object.defineProperty(Matrix3.prototype,"elements",{get:function(){return __spreadArray([],this._elements,true)},enumerable:false,configurable:true});Matrix3.prototype.set=function(a11,a12,a13,a21,a22,a23,a31,a32,a33){var e=this._elements;if(e[0]!==a11||e[1]!==a12||e[2]!==a13||e[3]!==a21||e[4]!==a22||e[5]!==a23||e[6]!==a31||e[7]!==a32||e[8]!==a33){e[0]=a11;e[1]=a12;e[2]=a13;e[3]=a21;e[4]=a22;e[5]=a23;e[6]=a31;e[7]=a32;e[8]=a33;this.notifyObservers()}return this};Matrix3.prototype.copy=function(m){var e=m.elements;this.set(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]);return this};Matrix3.prototype.clone=function(){var e=this.elements;return new Matrix3(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])};Matrix3.prototype.equals=function(m){var e1=this.elements;var e2=m.elements;return e1[0]===e2[0]&&e1[1]===e2[1]&&e1[2]===e2[2]&&e1[3]===e2[3]&&e1[4]===e2[4]&&e1[5]===e2[5]&&e1[6]===e2[6]&&e1[7]===e2[7]&&e1[8]===e2[8]};Matrix3.prototype.matrixMultiplication=function(m1,m2){var a=m1.elements;var b=m2.elements;this.set(a[0]*b[0]+a[1]*b[3]+a[2]*b[6],a[0]*b[1]+a[1]*b[4]+a[2]*b[7],a[0]*b[2]+a[1]*b[5]+a[2]*b[8],a[3]*b[0]+a[4]*b[3]+a[5]*b[6],a[3]*b[1]+a[4]*b[4]+a[5]*b[7],a[3]*b[2]+a[4]*b[5]+a[5]*b[8],a[6]*b[0]+a[7]*b[3]+a[8]*b[6],a[6]*b[1]+a[7]*b[4]+a[8]*b[7],a[6]*b[2]+a[7]*b[5]+a[8]*b[8]);return this};Matrix3.prototype.multiply=function(m){this.matrixMultiplication(this,m);return this};Matrix3.prototype.transform=function(m){this.matrixMultiplication(m,this);return this};Matrix3.prototype.setIdentity=function(){this.set(1,0,0,0,1,0,0,0,1);return this};Matrix3.prototype.setTranslation=function(t){this.set(1,0,t.x,0,1,t.y,0,0,1);return this};Matrix3.prototype.setScaling=function(s){this.set(s.x,0,0,0,s.y,0,0,0,1);return this};Matrix3.prototype.setRotation=function(a,p){if(p===undefined){var sin=Math.sin(a.radians);var cos=Math.cos(a.radians);this.set(cos,-sin,0,sin,cos,0,0,0,1)}else{this.setTranslation(p.clone().multiplyScalar(-1));this.applyRotation(a);this.applyTranslation(p)}return this};Matrix3.prototype.applyTranslation=function(t){this.transform((new Matrix3).setTranslation(t));return this};Matrix3.prototype.applyScaling=function(s){this.transform((new Matrix3).setScaling(s));return this};Matrix3.prototype.applyRotation=function(a,p){this.transform((new Matrix3).setRotation(a,p));return this};Matrix3.prototype.determinant=function(){var el=this.elements;var a=el[0];var b=el[1];var c=el[2];var d=el[3];var e=el[4];var f=el[5];var g=el[6];var h=el[7];var i=el[8];return a*e*i-a*f*h-b*d*i+b*f*g+c*d*h-c*e*g};Matrix3.prototype.setToInverse=function(m){var det=m.determinant();if(det===0){throw new Error("Can not invert matrix because determinant is 0.")}var detInv=1/det;var me=m.elements;var a=me[0];var b=me[1];var c=me[2];var d=me[3];var e=me[4];var f=me[5];var g=me[6];var h=me[7];var i=me[8];this.set((i*e-f*h)*detInv,(c*h-i*b)*detInv,(f*b-c*e)*detInv,(f*g-i*d)*detInv,(i*a-c*g)*detInv,(c*d-f*a)*detInv,(h*d-e*g)*detInv,(b*g-h*a)*detInv,(e*a-b*d)*detInv);return this};return Matrix3}(observable_1.Observable);exports.Matrix3=Matrix3},{"@daign/observable":97}],89:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.StringArray=void 0;var genericArray_1=require("./genericArray");var StringArray=function(_super){__extends(StringArray,_super);function StringArray(){return _super.call(this)||this}StringArray.prototype.clone=function(){var arr=new StringArray;arr.elements=this.elements;return arr};StringArray.prototype.cloneDeep=function(){var arr=new StringArray;arr.elements=this.elements.map(function(element){return element.clone()});return arr};return StringArray}(genericArray_1.GenericArray);exports.StringArray=StringArray},{"./genericArray":84}],90:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.StringValue=void 0;var observable_1=require("@daign/observable");var StringValue=function(_super){__extends(StringValue,_super);function StringValue(value){var _this=_super.call(this)||this;_this._value=value||"";return _this}Object.defineProperty(StringValue.prototype,"value",{get:function(){return this._value},set:function(value){if(this._value!==value){this._value=value;this.notifyObservers()}},enumerable:false,configurable:true});StringValue.prototype.setSilent=function(value){this._value=value;return this};StringValue.prototype.clone=function(){return new StringValue(this.value)};StringValue.prototype.equals=function(s){return this.value===s.value};return StringValue}(observable_1.Observable);exports.StringValue=StringValue},{"@daign/observable":97}],91:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.Triangle2=void 0;var observable_1=require("@daign/observable");var line2_1=require("./line2");var vector2_1=require("./vector2");var vector3_1=require("./vector3");var Triangle2=function(_super){__extends(Triangle2,_super);function Triangle2(a,b,c){var _this=_super.call(this)||this;_this._a=a||new vector2_1.Vector2;_this._b=b||new vector2_1.Vector2;_this._c=c||new vector2_1.Vector2;var callback=function(){_this.notifyObservers()};_this._a.subscribeToChanges(callback);_this._b.subscribeToChanges(callback);_this._c.subscribeToChanges(callback);return _this}Object.defineProperty(Triangle2.prototype,"a",{get:function(){return this._a},enumerable:false,configurable:true});Object.defineProperty(Triangle2.prototype,"b",{get:function(){return this._b},enumerable:false,configurable:true});Object.defineProperty(Triangle2.prototype,"c",{get:function(){return this._c},enumerable:false,configurable:true});Triangle2.prototype.copy=function(t){this.a.copy(t.a);this.b.copy(t.b);this.c.copy(t.c);return this};Triangle2.prototype.clone=function(){return new Triangle2(this.a.clone(),this.b.clone(),this.c.clone())};Triangle2.prototype.equals=function(t){return this.a.equals(t.a)&&this.b.equals(t.b)&&this.c.equals(t.c)};Triangle2.prototype.getBarycoord=function(p){var v0=this.b.clone().sub(this.a);var v1=this.c.clone().sub(this.a);var v2=p.clone().sub(this.a);var dot00=v0.dot(v0);var dot01=v0.dot(v1);var dot02=v0.dot(v2);var dot11=v1.dot(v1);var dot12=v1.dot(v2);var denom=dot00*dot11-dot01*dot01;if(denom===0){return null}var invDenom=1/denom;var u=(dot11*dot02-dot01*dot12)*invDenom;var v=(dot00*dot12-dot01*dot02)*invDenom;return new vector3_1.Vector3(1-u-v,v,u)};Triangle2.prototype.containsPoint=function(p){var barycoord=this.getBarycoord(p);if(barycoord!==null){return barycoord.x>=0&&barycoord.y>=0&&barycoord.x+barycoord.y<=1}return null};Triangle2.prototype.getCircumcenter=function(){var side1=this.b.clone().sub(this.a);var side2=this.c.clone().sub(this.a);var midpoint1=side1.clone().multiplyScalar(.5).add(this.a);var midpoint2=side2.clone().multiplyScalar(.5).add(this.a);var line1=new line2_1.Line2(midpoint1,side1.perpendicular().add(midpoint1));var line2=new line2_1.Line2(midpoint2,side2.perpendicular().add(midpoint2));return line1.getIntersection(line2)};return Triangle2}(observable_1.Observable);exports.Triangle2=Triangle2},{"./line2":86,"./vector2":94,"./vector3":96,"@daign/observable":97}],92:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.Value=void 0;var vector1_1=require("./vector1");var Value=function(_super){__extends(Value,_super);function Value(x){return _super.call(this,x)||this}Value.prototype.getThis=function(){return this};Value.prototype.clone=function(){return new Value(this.x)};return Value}(vector1_1.Vector1);exports.Value=Value},{"./vector1":93}],93:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.Vector1=void 0;var observable_1=require("@daign/observable");var mathHelper_1=require("./mathHelper");var Vector1=function(_super){__extends(Vector1,_super);function Vector1(x){var _this=_super.call(this)||this;_this._x=x||0;_this.snapshot=undefined;return _this}Object.defineProperty(Vector1.prototype,"x",{get:function(){return this._x},set:function(value){if(this._x!==value){this._x=value;this.notifyObservers()}},enumerable:false,configurable:true});Vector1.prototype.setSilent=function(x){this._x=x;return this.getThis()};Vector1.prototype.copy=function(v){this.x=v.x;return this.getThis()};Vector1.prototype.equals=function(v){return this.x===v.x};Vector1.prototype.closeTo=function(v,delta){return mathHelper_1.MathHelper.closeTo(this.x,v.x,delta)};Vector1.prototype.add=function(v){this.x=this.x+v.x;return this.getThis()};Vector1.prototype.sub=function(v){this.x=this.x-v.x;return this.getThis()};Vector1.prototype.multiplyScalar=function(s){this.x=this.x*s;return this.getThis()};Vector1.prototype.abs=function(){this.x=Math.abs(this.x);return this.getThis()};Vector1.prototype.round=function(precision){if(precision){var factor=Math.pow(10,precision);var x=Math.round((this.x+Number.EPSILON)*factor)/factor;this.x=x}else{this.x=Math.round(this.x)}return this.getThis()};Vector1.prototype.clamp=function(min,max){this.x=Math.max(min,Math.min(max,this.x));return this.getThis()};Vector1.prototype.snap=function(){this.snapshot=this.clone();return this.getThis()};Vector1.prototype.drag=function(v){if(this.snapshot!==undefined){this.x=this.snapshot.x+v}return this.getThis()};return Vector1}(observable_1.Observable);exports.Vector1=Vector1},{"./mathHelper":87,"@daign/observable":97}],94:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.Vector2=void 0;var observable_1=require("@daign/observable");var angle_1=require("./angle");var mathHelper_1=require("./mathHelper");var Vector2=function(_super){__extends(Vector2,_super);function Vector2(x,y){var _this=_super.call(this)||this;_this._x=x||0;_this._y=y||0;_this.snapshot=undefined;return _this}Object.defineProperty(Vector2.prototype,"x",{get:function(){return this._x},set:function(value){if(this._x!==value){this._x=value;this.notifyObservers()}},enumerable:false,configurable:true});Object.defineProperty(Vector2.prototype,"y",{get:function(){return this._y},set:function(value){if(this._y!==value){this._y=value;this.notifyObservers()}},enumerable:false,configurable:true});Vector2.prototype.set=function(x,y){if(this._x!==x||this._y!==y){this._x=x;this._y=y;this.notifyObservers()}return this};Vector2.prototype.setX=function(value){this.x=value;return this};Vector2.prototype.setY=function(value){this.y=value;return this};Vector2.prototype.setSilent=function(x,y){this._x=x;this._y=y;return this};Vector2.prototype.setFromEvent=function(event){if(event&&event.clientX!==undefined&&event.clientY!==undefined){this.set(event.clientX,event.clientY);return this}else{this.setFromTouchEvent(event,0);return this}};Vector2.prototype.setFromEventRelative=function(event){if(event&&event.offsetX!==undefined&&event.offsetY!==undefined){this.set(event.offsetX,event.offsetY);return this}else{this.setFromTouchEventRelative(event,0);return this}};Vector2.prototype.setFromTouchEvent=function(event,touchIndex){if(event&&event.touches&&event.touches[touchIndex]&&event.touches[touchIndex].clientX!==undefined&&event.touches[touchIndex].clientY!==undefined){this.set(event.touches[touchIndex].clientX,event.touches[touchIndex].clientY);return this}else{throw new Error("Unable to extract position from event.")}};Vector2.prototype.setFromTouchEventRelative=function(event,touchIndex){if(!event||!event.target||!event.target.getBoundingClientRect||!event.touches||!event.touches[touchIndex]||event.touches[touchIndex].pageX===undefined||event.touches[touchIndex].pageY===undefined){throw new Error("Unable to extract position from event.")}var rect=event.target.getBoundingClientRect();if(!rect||rect.left===undefined||rect.top===undefined){throw new Error("Unable to extract position from event.")}var x=event.touches[touchIndex].pageX-rect.left;var y=event.touches[touchIndex].pageY-rect.top;this.set(x,y);return this};Vector2.prototype.setFromScrollEvent=function(event){if(!event||event.deltaX===undefined&&event.deltaY===undefined){throw new Error("Unable to extract scroll value from event.")}var delta=new Vector2;if(event.deltaX!==undefined){delta.x=event.deltaX}if(event.deltaY!==undefined){delta.y=event.deltaY}this.copy(delta);return this};Vector2.prototype.copy=function(v){this.set(v.x,v.y);return this};Vector2.prototype.clone=function(){return new Vector2(this.x,this.y)};Vector2.prototype.equals=function(v){return this.x===v.x&&this.y===v.y};Vector2.prototype.closeTo=function(v,delta){return mathHelper_1.MathHelper.closeTo(this.x,v.x,delta)&&mathHelper_1.MathHelper.closeTo(this.y,v.y,delta)};Vector2.prototype.add=function(v){this.set(this.x+v.x,this.y+v.y);return this};Vector2.prototype.sub=function(v){this.set(this.x-v.x,this.y-v.y);return this};Vector2.prototype.multiply=function(v){this.set(this.x*v.x,this.y*v.y);return this};Vector2.prototype.divide=function(v){this.set(this.x/v.x,this.y/v.y);return this};Vector2.prototype.addScalar=function(s){this.set(this.x+s,this.y+s);return this};Vector2.prototype.multiplyScalar=function(s){this.set(this.x*s,this.y*s);return this};Vector2.prototype.modulo=function(s){this.set(this.x%s,this.y%s);return this};Vector2.prototype.transform=function(m){var a=m.elements;var x=a[0]*this.x+a[1]*this.y+a[2];var y=a[3]*this.x+a[4]*this.y+a[5];var w=a[6]*this.x+a[7]*this.y+a[8];this.set(x/w,y/w);return this};Vector2.prototype.min=function(v){this.set(Math.min(this.x,v.x),Math.min(this.y,v.y));return this};Vector2.prototype.max=function(v){this.set(Math.max(this.x,v.x),Math.max(this.y,v.y));return this};Vector2.prototype.abs=function(){this.set(Math.abs(this.x),Math.abs(this.y));return this};Vector2.prototype.round=function(precision){if(precision){var factor=Math.pow(10,precision);var x=Math.round((this.x+Number.EPSILON)*factor)/factor;var y=Math.round((this.y+Number.EPSILON)*factor)/factor;this.set(x,y)}else{this.set(Math.round(this.x),Math.round(this.y))}return this};Vector2.prototype.floor=function(){this.set(Math.floor(this.x),Math.floor(this.y));return this};Vector2.prototype.ceil=function(){this.set(Math.ceil(this.x),Math.ceil(this.y));return this};Vector2.prototype.clampInBox=function(b){this.min(b.max);this.max(b.min);return this};Vector2.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};Vector2.prototype.normalize=function(){var length=this.length();if(length!==0){this.multiplyScalar(1/length)}return this};Vector2.prototype.setLength=function(l){var oldLength=this.length();if(oldLength!==0){this.multiplyScalar(l/oldLength)}return this};Vector2.prototype.distanceTo=function(v){return Math.sqrt(Math.pow(this.x-v.x,2)+Math.pow(this.y-v.y,2))};Vector2.prototype.angle=function(){var angle=Math.atan2(this.y,this.x);if(angle<0){angle+=2*Math.PI}return new angle_1.Angle(angle)};Vector2.prototype.setAngle=function(a){var length=this.length();var x=Math.cos(a.radians);var y=Math.sin(a.radians);var v=new Vector2(x,y);v.setLength(length);this.copy(v);return this};Vector2.prototype.rotate=function(a){var endAngle=this.angle().add(a);this.setAngle(endAngle);return this};Vector2.prototype.angleTo=function(v){return v.angle().sub(this.angle()).normalize()};Vector2.prototype.dot=function(v){return this.x*v.x+this.y*v.y};Vector2.prototype.cross=function(v){return this.x*v.y-this.y*v.x};Vector2.prototype.snap=function(){this.snapshot=this.clone();return this};Vector2.prototype.drag=function(v){if(this.snapshot!==undefined){this.copy(this.snapshot.clone().add(v))}return this};Vector2.prototype.projectOnLine=function(l){var support=this.clone().sub(l.start);var direction=l.end.clone().sub(l.start);var directionN=direction.clone().normalize();var d=support.dot(directionN);return directionN.clone().multiplyScalar(d).add(l.start)};Vector2.prototype.projectOnLineSegment=function(l){var support=this.clone().sub(l.start);var direction=l.end.clone().sub(l.start);var directionN=direction.clone().normalize();var d=support.dot(directionN);if(d>=0&&d<=direction.length()){return directionN.clone().multiplyScalar(d).add(l.start)}else{return null}};Vector2.prototype.perpendicular=function(){return new Vector2(this.y,-this.x)};return Vector2}(observable_1.Observable);exports.Vector2=Vector2},{"./angle":81,"./mathHelper":87,"@daign/observable":97}],95:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.Vector2Array=void 0;var box2_1=require("./box2");var genericArray_1=require("./genericArray");var vector2_1=require("./vector2");var Vector2Array=function(_super){__extends(Vector2Array,_super);function Vector2Array(){return _super.call(this)||this}Vector2Array.prototype.initializeElements=function(n){var elements=[];for(var i=0;i<n;i+=1){elements.push(new vector2_1.Vector2)}this.elements=elements;return this};Vector2Array.prototype.copyElementWise=function(arr){if(this.length!==arr.length){throw new Error("Array lengths do not match.")}this.iterate(function(element,index){var sourceElement=arr.getElement(index);element.copy(sourceElement)});return this};Vector2Array.prototype.clone=function(){var arr=new Vector2Array;arr.elements=this.elements;return arr};Vector2Array.prototype.cloneDeep=function(){var arr=new Vector2Array;arr.elements=this.elements.map(function(element){return element.clone()});return arr};Vector2Array.prototype.transform=function(m){this.iterate(function(element){element.transform(m)});return this};Vector2Array.prototype.getBox=function(){var box=new box2_1.Box2;this.elements.forEach(function(element){box.expandByPoint(element)});return box};return Vector2Array}(genericArray_1.GenericArray);exports.Vector2Array=Vector2Array},{"./box2":82,"./genericArray":84,"./vector2":94}],96:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});exports.Vector3=void 0;var observable_1=require("@daign/observable");var Vector3=function(_super){__extends(Vector3,_super);function Vector3(x,y,z){var _this=_super.call(this)||this;_this._x=x||0;_this._y=y||0;_this._z=z||0;return _this}Object.defineProperty(Vector3.prototype,"x",{get:function(){return this._x},set:function(value){if(this._x!==value){this._x=value;this.notifyObservers()}},enumerable:false,configurable:true});Object.defineProperty(Vector3.prototype,"y",{get:function(){return this._y},set:function(value){if(this._y!==value){this._y=value;this.notifyObservers()}},enumerable:false,configurable:true});Object.defineProperty(Vector3.prototype,"z",{get:function(){return this._z},set:function(value){if(this._z!==value){this._z=value;this.notifyObservers()}},enumerable:false,configurable:true});Vector3.prototype.set=function(x,y,z){if(this._x!==x||this._y!==y||this._z!==z){this._x=x;this._y=y;this._z=z;this.notifyObservers()}return this};Vector3.prototype.setSilent=function(x,y,z){this._x=x;this._y=y;this._z=z;return this};Vector3.prototype.copy=function(v){this.set(v.x,v.y,v.z);return this};Vector3.prototype.clone=function(){return new Vector3(this.x,this.y,this.z)};Vector3.prototype.equals=function(v){return this.x===v.x&&this.y===v.y&&this.z===v.z};Vector3.prototype.add=function(v){this.set(this.x+v.x,this.y+v.y,this.z+v.z);return this};Vector3.prototype.sub=function(v){this.set(this.x-v.x,this.y-v.y,this.z-v.z);return this};Vector3.prototype.multiply=function(v){this.set(this.x*v.x,this.y*v.y,this.z*v.z);return this};Vector3.prototype.divide=function(v){this.set(this.x/v.x,this.y/v.y,this.z/v.z);return this};Vector3.prototype.addScalar=function(s){this.set(this.x+s,this.y+s,this.z+s);return this};Vector3.prototype.multiplyScalar=function(s){this.set(this.x*s,this.y*s,this.z*s);return this};Vector3.prototype.min=function(v){this.set(Math.min(this.x,v.x),Math.min(this.y,v.y),Math.min(this.z,v.z));return this};Vector3.prototype.max=function(v){this.set(Math.max(this.x,v.x),Math.max(this.y,v.y),Math.max(this.z,v.z));return this};return Vector3}(observable_1.Observable);exports.Vector3=Vector3},{"@daign/observable":97}],97:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Observable=void 0;var observable_1=require("./observable");Object.defineProperty(exports,"Observable",{enumerable:true,get:function(){return observable_1.Observable}})},{"./observable":98}],98:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Observable=void 0;var Observable=function(){function Observable(){this.listeners=[]}Observable.prototype.subscribeToChanges=function(callback){var _this=this;this.listeners.push(callback);return function(){var i=_this.listeners.indexOf(callback);if(i>-1){_this.listeners.splice(i,1)}}};Observable.prototype.notifyObservers=function(){this.listeners.forEach(function(callback){callback()})};Observable.prototype.clearObservers=function(){this.listeners=[]};return Observable}();exports.Observable=Observable},{}],99:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Schedule=void 0;var schedule_1=require("./schedule");Object.defineProperty(exports,"Schedule",{enumerable:true,get:function(){return schedule_1.Schedule}})},{"./schedule":100}],100:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Schedule=void 0;var Schedule=function(){function Schedule(){}Schedule.postpone=function(callback,wait,context){if(context===void 0){context=null}return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}setTimeout(function(){callback.apply(context,args)},wait)}};Schedule.blockingThrottle=function(callback,wait,context){if(context===void 0){context=null}var blocked=false;return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}if(!blocked){blocked=true;callback.apply(context,args);setTimeout(function(){blocked=false},wait)}}};Schedule.deferringThrottle=function(callback,wait,context){if(context===void 0){context=null}var blocked=false;var deferredCalls=false;var lastArgs;var execute=function(args){callback.apply(context,args);setTimeout(function(){if(deferredCalls){deferredCalls=false;execute(lastArgs)}else{blocked=false}},wait)};return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}if(blocked){lastArgs=args;deferredCalls=true}else{blocked=true;deferredCalls=false;execute(args)}}};return Schedule}();exports.Schedule=Schedule},{}],101:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StyleSheet=exports.StyleSelectorChain=exports.StyleSelector=exports.StyleRule=exports.StyleProcessor=void 0;var styleProcessor_1=require("./styleProcessor");Object.defineProperty(exports,"StyleProcessor",{enumerable:true,get:function(){return styleProcessor_1.StyleProcessor}});var styleRule_1=require("./styleRule");Object.defineProperty(exports,"StyleRule",{enumerable:true,get:function(){return styleRule_1.StyleRule}});var styleSelector_1=require("./styleSelector");Object.defineProperty(exports,"StyleSelector",{enumerable:true,get:function(){return styleSelector_1.StyleSelector}});var styleSelectorChain_1=require("./styleSelectorChain");Object.defineProperty(exports,"StyleSelectorChain",{enumerable:true,get:function(){return styleSelectorChain_1.StyleSelectorChain}});var styleSheet_1=require("./styleSheet");Object.defineProperty(exports,"StyleSheet",{enumerable:true,get:function(){return styleSheet_1.StyleSheet}})},{"./styleProcessor":102,"./styleRule":103,"./styleSelector":104,"./styleSelectorChain":105,"./styleSheet":106}],102:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StyleProcessor=void 0;var StyleProcessor=function(){function StyleProcessor(){}StyleProcessor.prototype.calculateStyle=function(styleSheet,selectorChain,declarationType,elementStyle){var result=new declarationType;if(elementStyle){result.complementWith(elementStyle)}var _loop_1=function(i){var subChain=selectorChain.clone().dropSelectors(i);styleSheet.forEach(function(rule){if(subChain.matchFromEnd(rule.selectorChain)){result.complementWith(rule.declaration)}})};for(var i=0;i<selectorChain.length;i+=1){_loop_1(i)}return result};return StyleProcessor}();exports.StyleProcessor=StyleProcessor},{}],103:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StyleRule=void 0;var StyleRule=function(){function StyleRule(selectorChain,declaration){this.selectorChain=selectorChain;this.declaration=declaration}StyleRule.prototype.comparePriority=function(secondRule){return this.selectorChain.comparePriority(secondRule.selectorChain)};return StyleRule}();exports.StyleRule=StyleRule},{}],104:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StyleSelector=void 0;var StyleSelector=function(){function StyleSelector(s){this.classNames=[];if(s&&s.charAt(0)==="."){this.classNames=s.split(".").slice(1)}}StyleSelector.prototype.match=function(selector){var _this=this;if(selector.classNames.length>0){return selector.classNames.every(function(name){return _this.classNames.indexOf(name)!==-1})}else{return false}};StyleSelector.prototype.comparePriority=function(selector){var sign=function(x){return Number(x>0)-Number(x<0)};return sign(this.classNames.length-selector.classNames.length)};return StyleSelector}();exports.StyleSelector=StyleSelector},{}],105:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StyleSelectorChain=void 0;var StyleSelectorChain=function(){function StyleSelectorChain(){this.chain=[]}Object.defineProperty(StyleSelectorChain.prototype,"length",{get:function(){return this.chain.length},enumerable:false,configurable:true});StyleSelectorChain.prototype.clone=function(){var newChain=new StyleSelectorChain;newChain.chain=this.chain.slice();return newChain};StyleSelectorChain.prototype.addSelector=function(selector){this.chain.push(selector);return this};StyleSelectorChain.prototype.addSelectorToFront=function(selector){this.chain.unshift(selector);return this};StyleSelectorChain.prototype.dropSelectors=function(n){if(n>0){this.chain.splice(this.length-n,n)}return this};StyleSelectorChain.prototype.getSelector=function(index){if(index>=this.length){throw new Error("Selector index out of bounds.")}return this.chain[index]};StyleSelectorChain.prototype.matchFromEnd=function(ruleChain){if(this.length===0||ruleChain.length===0){return false}var ruleIndex=ruleChain.length-1;var endSelector=this.getSelector(this.length-1);if(!endSelector.match(ruleChain.getSelector(ruleIndex))){return false}for(var i=0;i<this.length;i+=1){var selector=this.getSelector(this.length-i-1);if(selector.match(ruleChain.getSelector(ruleIndex))){ruleIndex-=1;if(ruleIndex===-1){return true}}}return false};StyleSelectorChain.prototype.comparePriority=function(secondChain){var sign=function(x){return Number(x>0)-Number(x<0)};var result=sign(this.length-secondChain.length);if(result===0){for(var i=0;i<this.length;i+=1){var index=this.length-i-1;var innerResult=this.getSelector(index).comparePriority(secondChain.getSelector(index));if(innerResult!==0){return innerResult}}}return result};return StyleSelectorChain}();exports.StyleSelectorChain=StyleSelectorChain},{}],106:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StyleSheet=void 0;var styleRule_1=require("./styleRule");var styleSelector_1=require("./styleSelector");var styleSelectorChain_1=require("./styleSelectorChain");var selectorExpression=/^\s*(\.[a-z][\.\w\-]*)\ \{$/;var attributeExpression=/^\s*([a-z][a-z\-]*)\:\ (.+)\;$/;var ruleEndExpression=/^\s*\}$/;var commentExpression=/^\s*\/\/\ .+$/;var emptyLineExpression=/^\s*$/;var StyleSheet=function(){function StyleSheet(){this.rules=[]}StyleSheet.prototype.forEach=function(callback){this.rules.forEach(callback)};StyleSheet.prototype.parseFromString=function(input,declarationType){var _this=this;var lines=input.split("\n");var selectorChainStack=[new styleSelectorChain_1.StyleSelectorChain];var declarationStack=[];lines.forEach(function(line,index){var selectorMatch=line.match(selectorExpression);var attributeMatch=line.match(attributeExpression);var ruleEndMatch=line.match(ruleEndExpression);var commentMatch=line.match(commentExpression);var emptyLineMatch=line.match(emptyLineExpression);if(selectorMatch!==null){var selector=new styleSelector_1.StyleSelector(selectorMatch[1]);var newChain=selectorChainStack[0].clone().addSelector(selector);selectorChainStack.unshift(newChain);var newDeclaration=new declarationType;declarationStack.unshift(newDeclaration)}else if(attributeMatch!==null){var currentDeclaration=declarationStack[0];currentDeclaration.parseAttribute(attributeMatch[1],attributeMatch[2])}else if(ruleEndMatch!==null){var currentChain=selectorChainStack.shift();var currentDeclaration=declarationStack.shift();if(currentChain&&currentDeclaration){if(!currentDeclaration.isEmpty){var newRule=new styleRule_1.StyleRule(currentChain,currentDeclaration);_this.addRule(newRule)}}else{throw new Error("Too many closing brackets in style sheet.")}}else if(commentMatch!==null){}else if(emptyLineMatch!==null){}else{throw new Error("Line "+(index+1)+" in style sheet could not be parsed.")}});if(selectorChainStack.length>1&&declarationStack.length>0){throw new Error("Missing closing brackets in style sheet.")}};StyleSheet.prototype.addRule=function(rule){var index=0;var indexLimit=this.rules.length;var isLess=-1;while(index<indexLimit&&rule.comparePriority(this.rules[index])===isLess){index+=1}this.rules.splice(index,0,rule)};return StyleSheet}();exports.StyleSheet=StyleSheet},{"./styleRule":103,"./styleSelector":104,"./styleSelectorChain":105}]},{},[12])(12)});
